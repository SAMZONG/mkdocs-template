
<!DOCTYPE html>

<html class="no-js" lang="zh">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width,initial-scale=1" name="viewport"/>
<meta content="统一存放了 NDX 团队的产品文档" name="description"/>
<meta content="Ting Ye" name="author"/>
<link href="https://ndx.gitpages.daocloud.io/product/product-research-document/support/CKA%20%E8%80%83%E8%AF%95/01-CAK%E8%AF%95%E9%A2%98%E6%94%B6%E9%9B%86%2001/" rel="canonical"/>
<link href="../../../images/icon.png" rel="icon"/>
<meta content="mkdocs-1.3.0, mkdocs-material-8.2.13" name="generator"/>
<title>CKA试题收集-01 - NDX 产品文档站</title>
<link href="../../../assets/stylesheets/main.e411adfe.min.css" rel="stylesheet"/>
<link href="../../../assets/stylesheets/palette.cc9b2e1e.min.css" rel="stylesheet"/>
<link href="../../../stylesheets/extra.css" rel="stylesheet"/>
<script>__md_scope=new URL("../../..",location),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
</head>
<body data-md-color-accent="" data-md-color-primary="indigo" data-md-color-scheme="default" dir="ltr">
<script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
<input autocomplete="off" class="md-toggle" data-md-toggle="drawer" id="__drawer" type="checkbox"/>
<input autocomplete="off" class="md-toggle" data-md-toggle="search" id="__search" type="checkbox"/>
<label class="md-overlay" for="__drawer"></label>
<div data-md-component="skip">
<a class="md-skip" href="#cka-01">
          跳转至
        </a>
</div>
<div data-md-component="announce">
</div>
<header class="md-header md-header--lifted" data-md-component="header">
<nav aria-label="页眉" class="md-header__inner md-grid">
<a aria-label="NDX 产品文档站" class="md-header__button md-logo" data-md-component="logo" href="../../.." title="NDX 产品文档站">
<img alt="logo" src="../../../images/icon.png"/>
</a>
<label class="md-header__button md-icon" for="__drawer">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"></path></svg>
</label>
<div class="md-header__title" data-md-component="header-title">
<div class="md-header__ellipsis">
<div class="md-header__topic">
<span class="md-ellipsis">
            NDX 产品文档站
          </span>
</div>
<div class="md-header__topic" data-md-component="header-topic">
<span class="md-ellipsis">
            
              CKA试题收集-01
            
          </span>
</div>
</div>
</div>
<form class="md-header__option" data-md-component="palette">
<input aria-label="Switch to dark mode" class="md-option" data-md-color-accent="" data-md-color-media="(prefers-color-scheme: light)" data-md-color-primary="indigo" data-md-color-scheme="default" id="__palette_1" name="__palette" type="radio"/>
<label class="md-header__button md-icon" for="__palette_2" hidden="" title="Switch to dark mode">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0-7 2.39 3.42C13.65 5.15 12.84 5 12 5c-.84 0-1.65.15-2.39.42L12 2M3.34 7l4.16-.35A7.2 7.2 0 0 0 5.94 8.5c-.44.74-.69 1.5-.83 2.29L3.34 7m.02 10 1.76-3.77a7.131 7.131 0 0 0 2.38 4.14L3.36 17M20.65 7l-1.77 3.79a7.023 7.023 0 0 0-2.38-4.15l4.15.36m-.01 10-4.14.36c.59-.51 1.12-1.14 1.54-1.86.42-.73.69-1.5.83-2.29L20.64 17M12 22l-2.41-3.44c.74.27 1.55.44 2.41.44.82 0 1.63-.17 2.37-.44L12 22Z"></path></svg>
</label>
<input aria-label="Switch to light mode" class="md-option" data-md-color-accent="" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-primary="deep-purple" data-md-color-scheme="slate" id="__palette_2" name="__palette" type="radio"/>
<label class="md-header__button md-icon" for="__palette_1" hidden="" title="Switch to light mode">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3 3.19.09m3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95 2.06.05m-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31Z"></path></svg>
</label>
</form>
<label class="md-header__button md-icon" for="__search">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"></path></svg>
</label>
<div class="md-search" data-md-component="search" role="dialog">
<label class="md-search__overlay" for="__search"></label>
<div class="md-search__inner" role="search">
<form class="md-search__form" name="search">
<input aria-label="搜索" autocapitalize="off" autocomplete="off" autocorrect="off" class="md-search__input" data-md-component="search-query" name="query" placeholder="搜索" required="" spellcheck="false" type="text"/>
<label class="md-search__icon md-icon" for="__search">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"></path></svg>
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"></path></svg>
</label>
<nav aria-label="查找" class="md-search__options">
<a aria-label="分享" class="md-search__icon md-icon" data-clipboard="" data-clipboard-text="" data-md-component="search-share" href="javascript:void(0)" tabindex="-1">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7 0-.24-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91 1.61 0 2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08Z"></path></svg>
</a>
<button aria-label="清空当前内容" class="md-search__icon md-icon" tabindex="-1" type="reset">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"></path></svg>
</button>
</nav>
<div class="md-search__suggest" data-md-component="search-suggest"></div>
</form>
<div class="md-search__output">
<div class="md-search__scrollwrap" data-md-scrollfix="">
<div class="md-search-result" data-md-component="search-result">
<div class="md-search-result__meta">
            正在初始化搜索引擎
          </div>
<ol class="md-search-result__list"></ol>
</div>
</div>
</div>
</div>
</div>
<div class="md-header__source">
<a class="md-source" data-md-component="source" href="https://gitlab.daocloud.cn/ndx/product/product-research-document" title="前往仓库">
<div class="md-source__icon md-icon">
<svg viewbox="0 0 512 512" xmlns="http://www.w3.org/2000/svg"><!--! Font Awesome Free 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M216.29 158.39H137C97 147.9 6.51 150.63 6.51 233.18c0 30.09 15 51.23 35 61-25.1 23-37 33.85-37 49.21 0 11 4.47 21.14 17.89 26.81C8.13 383.61 0 393.35 0 411.65c0 32.11 28.05 50.82 101.63 50.82 70.75 0 111.79-26.42 111.79-73.18 0-58.66-45.16-56.5-151.63-63l13.43-21.55c27.27 7.58 118.7 10 118.7-67.89 0-18.7-7.73-31.71-15-41.07l37.41-2.84zm-63.42 241.9c0 32.06-104.89 32.1-104.89 2.43 0-8.14 5.27-15 10.57-21.54 77.71 5.3 94.32 3.37 94.32 19.11zm-50.81-134.58c-52.8 0-50.46-71.16 1.2-71.16 49.54 0 50.82 71.16-1.2 71.16zm133.3 100.51v-32.1c26.75-3.66 27.24-2 27.24-11V203.61c0-8.5-2.05-7.38-27.24-16.26l4.47-32.92H324v168.71c0 6.51.4 7.32 6.51 8.14l20.73 2.84v32.1zm52.45-244.31c-23.17 0-36.59-13.43-36.59-36.61s13.42-35.77 36.59-35.77c23.58 0 37 12.62 37 35.77s-13.42 36.61-37 36.61zM512 350.46c-17.49 8.53-43.1 16.26-66.28 16.26-48.38 0-66.67-19.5-66.67-65.46V194.75c0-5.42 1.05-4.06-31.71-4.06V154.5c35.78-4.07 50-22 54.47-66.27h38.63c0 65.83-1.34 61.81 3.26 61.81H501v40.65h-60.56v97.15c0 6.92-4.92 51.41 60.57 26.84z"></path></svg>
</div>
<div class="md-source__repository">
    Product Docs
  </div>
</a>
</div>
</nav>
<nav aria-label="标签" class="md-tabs" data-md-component="tabs">
<div class="md-tabs__inner md-grid">
<ul class="md-tabs__list">
<li class="md-tabs__item">
<a class="md-tabs__link" href="../../..">
        Home
      </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../../../dce5.0/">
        DCE 5.0
      </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../../../products/">
        Products
      </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../../../design/">
        Design
      </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../../../survey/">
        Survey
      </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link md-tabs__link--active" href="../../">
        Support
      </a>
</li>
</ul>
</div>
</nav>
</header>
<div class="md-container" data-md-component="container">
<main class="md-main" data-md-component="main">
<div class="md-main__inner md-grid">
<div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav aria-label="导航栏" class="md-nav md-nav--primary md-nav--lifted" data-md-level="0">
<label class="md-nav__title" for="__drawer">
<a aria-label="NDX 产品文档站" class="md-nav__button md-logo" data-md-component="logo" href="../../.." title="NDX 产品文档站">
<img alt="logo" src="../../../images/icon.png"/>
</a>
    NDX 产品文档站
  </label>
<div class="md-nav__source">
<a class="md-source" data-md-component="source" href="https://gitlab.daocloud.cn/ndx/product/product-research-document" title="前往仓库">
<div class="md-source__icon md-icon">
<svg viewbox="0 0 512 512" xmlns="http://www.w3.org/2000/svg"><!--! Font Awesome Free 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M216.29 158.39H137C97 147.9 6.51 150.63 6.51 233.18c0 30.09 15 51.23 35 61-25.1 23-37 33.85-37 49.21 0 11 4.47 21.14 17.89 26.81C8.13 383.61 0 393.35 0 411.65c0 32.11 28.05 50.82 101.63 50.82 70.75 0 111.79-26.42 111.79-73.18 0-58.66-45.16-56.5-151.63-63l13.43-21.55c27.27 7.58 118.7 10 118.7-67.89 0-18.7-7.73-31.71-15-41.07l37.41-2.84zm-63.42 241.9c0 32.06-104.89 32.1-104.89 2.43 0-8.14 5.27-15 10.57-21.54 77.71 5.3 94.32 3.37 94.32 19.11zm-50.81-134.58c-52.8 0-50.46-71.16 1.2-71.16 49.54 0 50.82 71.16-1.2 71.16zm133.3 100.51v-32.1c26.75-3.66 27.24-2 27.24-11V203.61c0-8.5-2.05-7.38-27.24-16.26l4.47-32.92H324v168.71c0 6.51.4 7.32 6.51 8.14l20.73 2.84v32.1zm52.45-244.31c-23.17 0-36.59-13.43-36.59-36.61s13.42-35.77 36.59-35.77c23.58 0 37 12.62 37 35.77s-13.42 36.61-37 36.61zM512 350.46c-17.49 8.53-43.1 16.26-66.28 16.26-48.38 0-66.67-19.5-66.67-65.46V194.75c0-5.42 1.05-4.06-31.71-4.06V154.5c35.78-4.07 50-22 54.47-66.27h38.63c0 65.83-1.34 61.81 3.26 61.81H501v40.65h-60.56v97.15c0 6.92-4.92 51.41 60.57 26.84z"></path></svg>
</div>
<div class="md-source__repository">
    Product Docs
  </div>
</a>
</div>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_1" id="__nav_1" type="checkbox"/>
<div class="md-nav__link md-nav__link--index">
<a href="../../..">Home</a>
<label for="__nav_1">
<span class="md-nav__icon md-icon"></span>
</label>
</div>
<nav aria-label="Home" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_1">
<span class="md-nav__icon md-icon"></span>
          Home
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../SUMMARY/">
        Summary
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2" id="__nav_2" type="checkbox"/>
<div class="md-nav__link md-nav__link--index">
<a href="../../../dce5.0/">DCE 5.0</a>
<label for="__nav_2">
<span class="md-nav__icon md-icon"></span>
</label>
</div>
<nav aria-label="DCE 5.0" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_2">
<span class="md-nav__icon md-icon"></span>
          DCE 5.0
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../dce5.0/01kpanda/">
        云容器管理
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../dce5.0/02ghippo/">
        全局管理
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../dce5.0/03clusterpedia/">
        集群资源检索 ClusterPedia
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../dce5.0/04insight/">
        可观测性 Insight
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../dce5.0/05hwameistor/">
        本地存储 HwameiStor
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../dce5.0/06frontend-ux/">
        前端设计 UX
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../dce5.0/07spiderpool/">
        网络开源
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../dce5.0/08spiderflat/">
        网络相关
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../dce5.0/09mspider/">
        服务网格
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../dce5.0/10merbridge/">
        Merbridge
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../dce5.0/11midware/">
        中间件
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../dce5.0/12skoala/">
        微服务引擎
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../dce5.0/13appws/">
        应用工作台
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../dce5.0/14kubegrid/">
        Kube Grid
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3" id="__nav_3" type="checkbox"/>
<div class="md-nav__link md-nav__link--index">
<a href="../../../products/">Products</a>
<label for="__nav_3">
<span class="md-nav__icon md-icon"></span>
</label>
</div>
<nav aria-label="Products" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_3">
<span class="md-nav__icon md-icon"></span>
          Products
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../products/dce4.0/">
        DCE 4.0
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../products/dcex/">
        云原生一体机
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../products/delivery/">
        交付项目支持
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../products/insight/">
        Insight 重点项目支持
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../products/pre-sales/">
        售前项目支持
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4" id="__nav_4" type="checkbox"/>
<div class="md-nav__link md-nav__link--index">
<a href="../../../design/">Design</a>
<label for="__nav_4">
<span class="md-nav__icon md-icon"></span>
</label>
</div>
<nav aria-label="Design" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_4">
<span class="md-nav__icon md-icon"></span>
          Design
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../design/interactive/">
        交互设计组件库
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../design/protype/">
        支援原型落地
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../design/sample/">
        设计样板房
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../design/visible/">
        可视化组件库
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5" id="__nav_5" type="checkbox"/>
<div class="md-nav__link md-nav__link--index">
<a href="../../../survey/">Survey</a>
<label for="__nav_5">
<span class="md-nav__icon md-icon"></span>
</label>
</div>
<nav aria-label="Survey" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_5">
<span class="md-nav__icon md-icon"></span>
          Survey
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../survey/cce/">
        CCE
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../survey/cilium/">
        Cilium
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../survey/harbor/">
        Harbor
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../survey/karmada/">
        Karmada
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../survey/kubesphere/">
        KubeSphere
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../survey/rancher/">
        Rancher
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../survey/storage/">
        存储调研
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../survey/tanzu/">
        Tanzu
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--active md-nav__item--nested">
<input checked="" class="md-nav__toggle md-toggle" data-md-toggle="__nav_6" id="__nav_6" type="checkbox"/>
<div class="md-nav__link md-nav__link--index">
<a href="../../">Support</a>
<label for="__nav_6">
<span class="md-nav__icon md-icon"></span>
</label>
</div>
<nav aria-label="Support" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_6">
<span class="md-nav__icon md-icon"></span>
          Support
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../01-mkdocs-material/">
        文档站使用说明
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../docs/">
        产品文档
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../flow-tools/">
        流程和工具
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../patent/">
        产品专利
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../teambuilding/">
        团队建设
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../training/">
        学习培训
      </a>
</li>
<li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
<input checked="" class="md-nav__toggle md-toggle" data-md-toggle="__nav_6_8" id="__nav_6_8" type="checkbox"/>
<div class="md-nav__link md-nav__link--index">
<a href="../">CKA 考试</a>
<label for="__nav_6_8">
<span class="md-nav__icon md-icon"></span>
</label>
</div>
<nav aria-label="CKA 考试" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_6_8">
<span class="md-nav__icon md-icon"></span>
          CKA 考试
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../00-CKA%E8%80%83%E8%AF%95%E6%8C%87%E5%8D%97/">
        CKA 备考指南
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../02-CKA%E5%A4%A7%E7%BA%B2/">
        CKA 备考大纲
      </a>
</li>
<li class="md-nav__item md-nav__item--active">
<input class="md-nav__toggle md-toggle" data-md-toggle="toc" id="__toc" type="checkbox"/>
<label class="md-nav__link md-nav__link--active" for="__toc">
          CKA试题收集-01
          <span class="md-nav__icon md-icon"></span>
</label>
<a class="md-nav__link md-nav__link--active" href="./">
        CKA试题收集-01
      </a>
<nav aria-label="On this page" class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">
<span class="md-nav__icon md-icon"></span>
      On this page
    </label>
<ul class="md-nav__list" data-md-component="toc" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="#_1">
    考前准备工作
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#_2">
    英文考试试题
  </a>
<nav aria-label="英文考试试题" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#1">
    试题1
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#2">
    试题2
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#3">
    试题3
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#4">
    试题4
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#5">
    试题5
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#6">
    试题6
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#7">
    试题7
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#8">
    试题8
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#9">
    试题9
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#10">
    试题10
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#11">
    试题11
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#12">
    试题12
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#13">
    试题13
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#14">
    试题14
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#15">
    试题15
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#16">
    试题16
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#17">
    试题17
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#18">
    试题18
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#19">
    试题19
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#20">
    试题20
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#21">
    试题21
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#22">
    试题22
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#23">
    试题23
  </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#cka">
    CKA模拟题
  </a>
<nav aria-label="CKA模拟题" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#1_1">
    试题1
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#2_1">
    试题2
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#3_1">
    试题3
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#4_1">
    试题4
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#5_1">
    试题5
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#6_1">
    试题6
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#7_1">
    试题7
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#8_1">
    试题8
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#9_1">
    试题9
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#10_1">
    试题10
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#11_1">
    试题11
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#12_1">
    试题12
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#13_1">
    试题13
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#14_1">
    试题14
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#15_1">
    试题15
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#16_1">
    试题16
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#17_1">
    试题17
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#18_1">
    试题18
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#19_1">
    试题19
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#20_1">
    试题20
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#21_1">
    试题21
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#22_1">
    试题22
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#23_1">
    试题23
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#24">
    试题24
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#25">
    试题25
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#26">
    试题26
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#27">
    试题27
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#26_1">
    试题26
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#27_1">
    试题27
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#26_2">
    试题26
  </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#cka_1">
    CKA真命题
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#_3">
    需要重点注意的题
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#cka-k8s">
    CKA考试 K8s 官方页签
  </a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</div>
</div>
</div>
<div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav aria-label="On this page" class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">
<span class="md-nav__icon md-icon"></span>
      On this page
    </label>
<ul class="md-nav__list" data-md-component="toc" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="#_1">
    考前准备工作
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#_2">
    英文考试试题
  </a>
<nav aria-label="英文考试试题" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#1">
    试题1
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#2">
    试题2
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#3">
    试题3
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#4">
    试题4
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#5">
    试题5
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#6">
    试题6
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#7">
    试题7
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#8">
    试题8
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#9">
    试题9
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#10">
    试题10
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#11">
    试题11
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#12">
    试题12
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#13">
    试题13
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#14">
    试题14
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#15">
    试题15
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#16">
    试题16
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#17">
    试题17
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#18">
    试题18
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#19">
    试题19
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#20">
    试题20
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#21">
    试题21
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#22">
    试题22
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#23">
    试题23
  </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#cka">
    CKA模拟题
  </a>
<nav aria-label="CKA模拟题" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#1_1">
    试题1
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#2_1">
    试题2
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#3_1">
    试题3
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#4_1">
    试题4
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#5_1">
    试题5
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#6_1">
    试题6
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#7_1">
    试题7
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#8_1">
    试题8
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#9_1">
    试题9
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#10_1">
    试题10
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#11_1">
    试题11
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#12_1">
    试题12
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#13_1">
    试题13
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#14_1">
    试题14
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#15_1">
    试题15
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#16_1">
    试题16
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#17_1">
    试题17
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#18_1">
    试题18
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#19_1">
    试题19
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#20_1">
    试题20
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#21_1">
    试题21
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#22_1">
    试题22
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#23_1">
    试题23
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#24">
    试题24
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#25">
    试题25
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#26">
    试题26
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#27">
    试题27
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#26_1">
    试题26
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#27_1">
    试题27
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#26_2">
    试题26
  </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#cka_1">
    CKA真命题
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#_3">
    需要重点注意的题
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#cka-k8s">
    CKA考试 K8s 官方页签
  </a>
</li>
</ul>
</nav>
</div>
</div>
</div>
<div class="md-content" data-md-component="content">
<article class="md-content__inner md-typeset">
<a class="md-content__button md-icon" href="https://gitlab.daocloud.cn/ndx/product/product-research-document/edit/master/docs/support/CKA 考试/01-CAK试题收集 01.md" title="编辑此页">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25Z"></path></svg>
</a>
<h1 id="cka-01">CKA试题收集-01<a class="headerlink" href="#cka-01" title="Permanent link">¶</a></h1>
<h2 id="_1">考前准备工作<a class="headerlink" href="#_1" title="Permanent link">¶</a></h2>
<ul>
<li>需要科学上网，CKA考试时需要检查上最低500Kbps下载和256Kbps上传，</li>
<li>笔记本电脑自带摄像头即可</li>
<li>需要安装<code>Innovative Exams Screensharing</code>谷歌浏览器插件</li>
<li>多做CKA真题，基本上考试就是参数有变动，都是原题</li>
<li>重点重点重点 考试时可以看官方文档，可以提前做成书签,考试时都有直接点击即可，只能打开一个页签。</li>
</ul>
<h2 id="_2">英文考试试题<a class="headerlink" href="#_2" title="Permanent link">¶</a></h2>
<h3 id="1">试题1<a class="headerlink" href="#1" title="Permanent link">¶</a></h3>
<div class="highlight"><pre><span></span><code>**Set configuration context <span class="nv">$kubectl</span> config use-context k8s. Monitor the logs of Pod foobar and Extract log lines corresponding to error unable-to-access-website . Write them to /opt/KULM00612/foobar.**

翻译：设置配置上下文<span class="nv">$kubectl</span> config use context k8s，监控Pod foobar的日志，并提取错误“unable-to-access-website”对应的日志行。把它们写到/opt/KULM00612/foobar。

解析：就是看下一个pod中的日志，把满足条件的日志行保存在某一文件中

解答：
首先切换下上下文k8s环境
kubectl config use context k8s
<span class="o">[</span>root@k8s-node1 ~<span class="o">]</span><span class="c1"># kubectl   logs nginx|grep "unable-to-access-website" &gt; /tmp/task.txt</span>
</code></pre></div>
<h3 id="2">试题2<a class="headerlink" href="#2" title="Permanent link">¶</a></h3>
<div class="highlight"><pre><span></span><code><span class="o">**</span><span class="no">Set</span> <span class="n">configuration</span> <span class="n">context</span> <span class="vg">$kubectl</span> <span class="n">config</span> <span class="n">use</span><span class="o">-</span><span class="n">context</span> <span class="n">k8s</span><span class="o">.</span> <span class="no">List</span> <span class="n">all</span> <span class="no">PVs</span> <span class="n">sorted</span> <span class="n">by</span> <span class="n">capacity</span><span class="p">,</span> <span class="n">saving</span> <span class="n">the</span> <span class="n">full</span> <span class="n">kubectl</span> <span class="n">output</span> <span class="n">to</span> <span class="sr">/opt/</span><span class="no">KUCC0006</span><span class="o">/</span><span class="n">my_volumes</span><span class="o">.</span> <span class="no">Use</span> <span class="n">kubectl</span> <span class="n">own</span> <span class="n">functionally</span> <span class="k">for</span> <span class="n">sorting</span> <span class="n">the</span> <span class="n">output</span><span class="p">,</span> <span class="ow">and</span> <span class="k">do</span> <span class="ow">not</span> <span class="n">manipulate</span> <span class="n">it</span> <span class="n">any</span> <span class="n">further</span><span class="o">**</span>

<span class="err">翻译：设置配置上下文</span><span class="vg">$kubectl</span> <span class="n">config</span> <span class="n">use</span> <span class="n">context</span> <span class="n">k8s</span><span class="err">。列出按容量排序的所有</span><span class="no">PV</span><span class="err">，将完整的</span><span class="n">kubectl输出保存到</span><span class="o">/</span><span class="n">opt</span><span class="o">/</span><span class="no">KUCC0006</span><span class="o">/</span><span class="n">my_volumes</span><span class="err">。在功能上使用</span><span class="n">kubectl</span> <span class="err">本身对输出进行排序，不要再对其进行任何操作</span>
<span class="err">解析：</span><span class="n">pv排序</span>

<span class="err">解答：</span> 
<span class="o">[</span><span class="n">root</span><span class="vi">@k8s</span><span class="o">-</span><span class="n">node1</span> <span class="n">pv</span><span class="o">]</span><span class="c1"># kubectl  get pv -A  --sort-by={.spec.capacity.sotrge} &gt;  /opt/cka-tak.txt</span>

<span class="err">然后在验证下是否文件中有数据。</span>
<span class="o">[</span><span class="n">root</span><span class="vi">@k8s</span><span class="o">-</span><span class="n">node1</span> <span class="n">pv</span><span class="o">]</span><span class="c1"># cat  /opt/cka-tak.txt</span>
<span class="no">NAME</span>     <span class="no">CAPACITY</span>   <span class="no">ACCESS</span> <span class="no">MODES</span>   <span class="no">RECLAIM</span> <span class="no">POLICY</span>   <span class="no">STATUS</span>      <span class="no">CLAIM</span>   <span class="no">STORAGECLASS</span>   <span class="no">REASON</span>   <span class="no">AGE</span>
<span class="n">nfspv1</span>   <span class="mi">1</span><span class="no">Gi</span>        <span class="no">RWO</span>            <span class="no">Recycle</span>          <span class="no">Available</span>           <span class="n">mynfs</span>                   <span class="mi">4</span><span class="n">m12s</span>
<span class="o">[</span><span class="n">root</span><span class="vi">@k8s</span><span class="o">-</span><span class="n">node1</span> <span class="n">pv</span><span class="o">]</span><span class="c1"># </span>
</code></pre></div>
<h3 id="3">试题3<a class="headerlink" href="#3" title="Permanent link">¶</a></h3>
<div class="highlight"><pre><span></span><code>**Set configuration context <span class="nv">$kubectl</span> config use-context k8s. Ensure a single instance of Pod nginx is running on each node of the Kubernetes cluster where nginx also represents the image name which has to be used. Do no override any taints currently <span class="k">in</span> place. Use Daemonset to <span class="nb">complete</span> this task and use ds.kusc00612 as Daemonset name**

翻译：设置配置上下文<span class="nv">$kubectl</span> config use context k8s。确保在Kubernetes集群的每个节点上运行Pod nginx的单个实例，其中nginx还表示必须使用的映像名称。不要覆盖当前存在的任何污点。使用Daemonset完成此任务并使用ds.kusc00612作为守护进程名称

解答： 可参照官网的Daemonset进行修改
https://kubernetes.io/zh/docs/concepts/workloads/controllers/daemonset/

<span class="o">[</span>root@k8s-node1 ~<span class="o">]</span><span class="c1"># vim Daemonset.ayml </span>
apiVersion: apps/v1
kind: DaemonSet
metadata:
  name: ds.kusc00612
  labels:
    k8s-app: ds.kusc00612
spec:
  selector:
    matchLabels:
      name: ds.kusc00612
  template:
    metadata:
      labels:
        name: ds.kusc00612
    spec:
      containers:
      - name: nginx
        image: nginx

apply加载yaml文件验证是否正常
<span class="o">[</span>root@k8s-node1 ~<span class="o">]</span><span class="c1"># kubectl  apply -f Daemonset.ayml </span>
daemonset.apps/ds.kusc00612 created
<span class="o">[</span>root@k8s-node1 ~<span class="o">]</span><span class="c1"># kubectl  get  daemonset</span>
NAME           DESIRED   CURRENT   READY   UP-TO-DATE   AVAILABLE   NODE SELECTOR   AGE
ds.kusc00612   <span class="m">1</span>         <span class="m">1</span>         <span class="m">1</span>       <span class="m">1</span>            <span class="m">1</span>           &lt;none&gt;          2m14s
</code></pre></div>
<h3 id="4">试题4<a class="headerlink" href="#4" title="Permanent link">¶</a></h3>
<div class="highlight"><pre><span></span><code><span class="n">Set</span><span class="w"> </span><span class="n">configuration</span><span class="w"> </span><span class="n">context</span><span class="w"> </span><span class="err">$</span><span class="n">kubectl</span><span class="w"> </span><span class="n">config</span><span class="w"> </span><span class="n">use</span><span class="o">-</span><span class="n">context</span><span class="w"> </span><span class="n">k8s</span><span class="w"> </span><span class="n">Perform</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">following</span><span class="w"> </span><span class="n">tasks</span><span class="p">:</span><span class="w"> </span><span class="n">Add</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="k">init</span><span class="w"> </span><span class="n">container</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">lumpy</span><span class="o">-</span><span class="n">koala</span><span class="p">(</span><span class="n">which</span><span class="w"> </span><span class="n">has</span><span class="w"> </span><span class="n">been</span><span class="w"> </span><span class="n">defined</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">spec</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="o">/</span><span class="n">opt</span><span class="o">/</span><span class="n">kucc00100</span><span class="o">/</span><span class="n">pod</span><span class="o">-</span><span class="n">specKUCC00612</span><span class="p">.</span><span class="na">yaml</span><span class="p">).</span><span class="w"> </span><span class="n">The</span><span class="w"> </span><span class="k">init</span><span class="w"> </span><span class="n">container</span><span class="w"> </span><span class="n">should</span><span class="w"> </span><span class="n">create</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="n">empty</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="n">named</span><span class="w"> </span><span class="o">/</span><span class="n">workdir</span><span class="o">/</span><span class="n">calm</span><span class="p">.</span><span class="na">txt</span><span class="p">.</span><span class="w"> </span><span class="n">If</span><span class="w"> </span><span class="o">/</span><span class="n">workdir</span><span class="o">/</span><span class="n">calm</span><span class="p">.</span><span class="na">txt</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">not</span><span class="w"> </span><span class="n">detected</span><span class="p">,</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">Pod</span><span class="w"> </span><span class="n">should</span><span class="w"> </span><span class="n">exit</span><span class="p">.</span><span class="w"> </span><span class="n">Once</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">spec</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="n">has</span><span class="w"> </span><span class="n">been</span><span class="w"> </span><span class="n">updated</span><span class="w"> </span><span class="n">with</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="k">init</span><span class="w"> </span><span class="n">container</span><span class="w"> </span><span class="n">definition</span><span class="p">,</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">Pod</span><span class="w"> </span><span class="n">should</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">created</span><span class="w"></span>
<span class="err">翻译：执行以下任务：将</span><span class="n">init</span><span class="err">容器添加到</span><span class="n">lumpy</span><span class="o">-</span><span class="n">koala</span><span class="err">（已在文件</span><span class="o">/</span><span class="n">opt</span><span class="o">/</span><span class="n">kucc00100</span><span class="o">/</span><span class="n">pod</span><span class="o">-</span><span class="n">specKUCC00612</span><span class="p">.</span><span class="na">yaml中定义</span><span class="err">）。</span><span class="n">init</span><span class="err">容器应该创建一个名为</span><span class="o">/</span><span class="n">workdir</span><span class="o">/</span><span class="n">calm</span><span class="p">.</span><span class="na">txt的空文件</span><span class="p">.</span><span class="w"> </span><span class="err">如果</span><span class="o">/</span><span class="n">workdir</span><span class="o">/</span><span class="n">calm</span><span class="p">.</span><span class="na">txt未检测到</span><span class="err">，</span><span class="n">Pod</span><span class="err">应退出。一旦用</span><span class="n">init</span><span class="err">容器定义更新了</span><span class="n">spec</span><span class="err">文件，就应该创建</span><span class="n">Pod</span><span class="w"></span>
<span class="err">解析：这道题在</span><span class="o">/</span><span class="n">opt</span><span class="o">/</span><span class="n">kucc00100</span><span class="o">/</span><span class="n">pod</span><span class="o">-</span><span class="n">specKUCC00612</span><span class="p">.</span><span class="na">yaml路径下已经有写好的Yaml了</span><span class="err">，但是还未在集群中创建该对象。所以你上去最好先</span><span class="n">kubectl</span><span class="w"> </span><span class="k">get</span><span class="w"> </span><span class="n">po</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">grep</span><span class="w"> </span><span class="n">pod</span><span class="err">名字。发现集群还没有该</span><span class="n">pod</span><span class="err">。所以你就先改下这个</span><span class="n">Yaml</span><span class="p">,</span><span class="err">然后</span><span class="n">apply</span><span class="p">.</span><span class="na">先创建Initcontainer</span><span class="p">,</span><span class="err">然后在里面创建文件，</span><span class="o">/</span><span class="n">workdir</span><span class="err">目录明显是个挂载进度的目录，题目没规定，你就定义</span><span class="n">empDir</span><span class="err">类型。这边还要用到</span><span class="n">liveness</span><span class="err">检查</span><span class="w"></span>

<span class="err">解答：</span><span class="w"> </span><span class="err">可参照官网</span><span class="p">:</span><span class="w"></span>
<span class="n">https</span><span class="p">:</span><span class="c1">//kubernetes.io/docs/concepts/workloads/pods/init-containers/#using-init-containers</span><span class="w"></span>
<span class="n">https</span><span class="p">:</span><span class="c1">//kubernetes.io/docs/concepts/storage/volumes/#emptydir</span><span class="w"></span>
<span class="n">https</span><span class="p">:</span><span class="c1">//kubernetes.io/docs/tasks/configure-pod-container/configure-liveness-readiness-startup-probes/</span><span class="w"></span>
<span class="o">[</span><span class="nd">root@</span><span class="n">k8s</span><span class="o">-</span><span class="n">node1</span><span class="w"> </span><span class="o">~]</span><span class="err">#</span><span class="w"> </span><span class="n">vim</span><span class="w">  </span><span class="k">init</span><span class="o">-</span><span class="n">pod</span><span class="p">.</span><span class="na">yaml</span><span class="w"> </span>
<span class="n">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="n">v1</span><span class="w"></span>
<span class="n">kind</span><span class="p">:</span><span class="w"> </span><span class="n">Pod</span><span class="w"></span>
<span class="n">metadata</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="n">name</span><span class="p">:</span><span class="w"> </span><span class="n">myapp</span><span class="o">-</span><span class="n">pod</span><span class="w"></span>
<span class="w">  </span><span class="n">labels</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="n">app</span><span class="p">:</span><span class="w"> </span><span class="n">myapp</span><span class="w"></span>
<span class="n">spec</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="n">containers</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="o">-</span><span class="w"> </span><span class="n">name</span><span class="p">:</span><span class="w"> </span><span class="n">myapp</span><span class="o">-</span><span class="n">container</span><span class="w"></span>
<span class="w">    </span><span class="n">image</span><span class="p">:</span><span class="w"> </span><span class="n">busybox</span><span class="p">:</span><span class="m">1.28</span><span class="w"></span>
<span class="w">    </span><span class="n">command</span><span class="p">:</span><span class="w"> </span><span class="o">[</span><span class="err">'</span><span class="n">sh</span><span class="err">'</span><span class="p">,</span><span class="w"> </span><span class="err">'</span><span class="o">-</span><span class="n">c</span><span class="err">'</span><span class="p">,</span><span class="w"> </span><span class="err">'</span><span class="n">echo</span><span class="w"> </span><span class="n">The</span><span class="w"> </span><span class="n">app</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">running</span><span class="o">!</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">sleep</span><span class="w"> </span><span class="m">3600</span><span class="err">'</span><span class="o">]</span><span class="w"></span>
<span class="w">  </span><span class="n">initContainers</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="o">-</span><span class="w"> </span><span class="n">name</span><span class="p">:</span><span class="w"> </span><span class="k">init</span><span class="o">-</span><span class="n">myservice</span><span class="w"></span>
<span class="w">    </span><span class="n">image</span><span class="p">:</span><span class="w"> </span><span class="n">busybox</span><span class="p">:</span><span class="m">1.28</span><span class="w"></span>
<span class="w">    </span><span class="n">command</span><span class="p">:</span><span class="w"> </span><span class="o">[</span><span class="err">'</span><span class="n">sh</span><span class="err">'</span><span class="p">,</span><span class="w"> </span><span class="err">'</span><span class="o">-</span><span class="n">c</span><span class="err">'</span><span class="p">,</span><span class="w"> </span><span class="s">"touch /workdir/calm.txt"</span><span class="o">]</span><span class="w"></span>
<span class="w">    </span><span class="n">volumeMounts</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="o">-</span><span class="w"> </span><span class="n">mountPath</span><span class="p">:</span><span class="w"> </span><span class="o">/</span><span class="n">workdir</span><span class="w"></span>
<span class="w">      </span><span class="n">name</span><span class="p">:</span><span class="w"> </span><span class="n">cache</span><span class="o">-</span><span class="n">volume</span><span class="w"></span>
<span class="w">  </span><span class="n">volumes</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="o">-</span><span class="w"> </span><span class="n">name</span><span class="p">:</span><span class="w"> </span><span class="n">cache</span><span class="o">-</span><span class="n">volume</span><span class="w"></span>
<span class="w">    </span><span class="n">emptyDir</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span><span class="w"></span>

<span class="o">[</span><span class="nd">root@</span><span class="n">k8s</span><span class="o">-</span><span class="n">node1</span><span class="w"> </span><span class="o">~]</span><span class="err">#</span><span class="w"> </span><span class="n">kubectl</span><span class="w">  </span><span class="n">apply</span><span class="w"> </span><span class="o">-</span><span class="n">f</span><span class="w">  </span><span class="k">init</span><span class="o">-</span><span class="n">pod</span><span class="p">.</span><span class="na">yaml</span><span class="w"> </span>
<span class="n">pod</span><span class="o">/</span><span class="n">myapp</span><span class="o">-</span><span class="n">pod</span><span class="w"> </span><span class="n">created</span><span class="w"></span>
</code></pre></div>
<h3 id="5">试题5<a class="headerlink" href="#5" title="Permanent link">¶</a></h3>
<div class="highlight"><pre><span></span><code><span class="no">Set</span> <span class="n">configuration</span> <span class="n">context</span> <span class="vg">$kubectl</span> <span class="n">config</span> <span class="n">use</span><span class="o">-</span><span class="n">context</span> <span class="n">k8s</span><span class="o">.</span> <span class="no">Create</span> <span class="n">a</span> <span class="n">pod</span> <span class="n">named</span> <span class="n">kucc6</span> <span class="n">with</span> <span class="n">a</span> <span class="n">single</span> <span class="n">container</span> <span class="k">for</span> <span class="n">each</span> <span class="n">of</span> <span class="n">the</span> <span class="n">following</span> <span class="n">images</span> <span class="n">running</span> <span class="n">inside</span><span class="p">(</span><span class="n">there</span> <span class="n">may</span> <span class="n">be</span> <span class="n">between</span> <span class="mi">1</span> <span class="ow">and</span> <span class="mi">4</span> <span class="n">images</span> <span class="n">specified</span><span class="p">)</span><span class="ss">:nginx</span> <span class="o">+</span><span class="n">redis</span><span class="o">+</span><span class="n">memcached</span><span class="o">+</span><span class="n">consul</span><span class="err">。</span>
<span class="err">翻译：创建一个名为</span><span class="n">kucc6的pod</span><span class="err">，其中包含运行在其中的以下映像的单个容器（可能会指定</span><span class="mi">1</span><span class="err">到</span><span class="mi">4</span><span class="err">个映像）：</span><span class="n">nginx</span><span class="o">+</span><span class="n">redis</span><span class="o">+</span><span class="n">memcached</span><span class="o">+</span><span class="n">consur</span>

<span class="err">解答：</span>
<span class="err">可参照官网</span><span class="ss">:https:/</span><span class="o">/</span><span class="n">kubernetes</span><span class="o">.</span><span class="n">io</span><span class="o">/</span><span class="n">zh</span><span class="o">/</span><span class="n">docs</span><span class="o">/</span><span class="n">concepts</span><span class="o">/</span><span class="n">scheduling</span><span class="o">-</span><span class="n">eviction</span><span class="o">/</span><span class="n">assign</span><span class="o">-</span><span class="n">pod</span><span class="o">-</span><span class="n">node</span><span class="o">/</span>

<span class="o">[</span><span class="n">root</span><span class="vi">@k8s</span><span class="o">-</span><span class="n">node1</span> <span class="o">~]</span><span class="c1"># vim images.yaml </span>
<span class="ss">apiVersion</span><span class="p">:</span> <span class="n">v1</span>
<span class="ss">kind</span><span class="p">:</span> <span class="no">Pod</span>
<span class="ss">metadata</span><span class="p">:</span>
  <span class="nb">name</span><span class="p">:</span> <span class="n">kucc6</span>
  <span class="ss">labels</span><span class="p">:</span>
    <span class="ss">env</span><span class="p">:</span> <span class="n">kucc6</span>
<span class="ss">spec</span><span class="p">:</span>
  <span class="ss">containers</span><span class="p">:</span>
  <span class="o">-</span> <span class="nb">name</span><span class="p">:</span> <span class="n">nginx</span>
    <span class="ss">image</span><span class="p">:</span> <span class="n">nginx</span>
  <span class="o">-</span> <span class="nb">name</span><span class="p">:</span> <span class="n">redis</span>
    <span class="ss">image</span><span class="p">:</span> <span class="n">redis</span>
  <span class="o">-</span> <span class="nb">name</span><span class="p">:</span> <span class="n">memcached</span>
    <span class="ss">image</span><span class="p">:</span> <span class="n">memcached</span>
  <span class="o">-</span> <span class="nb">name</span><span class="p">:</span> <span class="n">consul</span>
    <span class="ss">image</span><span class="p">:</span> <span class="n">consul</span>

<span class="err">验证：</span>
<span class="o">[</span><span class="n">root</span><span class="vi">@k8s</span><span class="o">-</span><span class="n">node1</span> <span class="o">~]</span><span class="c1"># kubectl  apply -f images.yaml </span>
<span class="n">pod</span><span class="o">/</span><span class="n">kucc6</span> <span class="n">created</span>
</code></pre></div>
<h3 id="6">试题6<a class="headerlink" href="#6" title="Permanent link">¶</a></h3>
<div class="highlight"><pre><span></span><code><span class="no">Set</span> <span class="n">configuration</span> <span class="n">context</span> <span class="vg">$kubectl</span> <span class="n">config</span> <span class="n">use</span><span class="o">-</span><span class="n">context</span> <span class="n">k8s</span> <span class="no">Schedule</span> <span class="n">a</span> <span class="no">Pod</span> <span class="n">as</span> <span class="ss">follows</span><span class="p">:</span> <span class="ss">Name</span><span class="p">:</span> <span class="n">nginxkusc00612</span> <span class="ss">Image</span><span class="p">:</span> <span class="n">nginx</span> <span class="no">Node</span> <span class="ss">selector</span><span class="p">:</span> <span class="n">disk</span><span class="o">=</span><span class="n">ssd</span>
<span class="err">翻译：创建</span> <span class="no">Pod</span><span class="err">，名字为</span> <span class="n">nginx</span><span class="err">，镜像为</span> <span class="n">nginx</span><span class="err">，部署到</span> <span class="n">label</span> <span class="n">disk</span><span class="o">=</span><span class="n">ssd的node上</span>
<span class="err">解析：</span><span class="n">pod调度到指定节点</span><span class="err">，</span><span class="no">Nodeselector</span>

<span class="err">解答：</span> <span class="err">官网搜索</span><span class="n">nodeselector找yaml文件</span><span class="p">,</span>
<span class="err">参考文档</span><span class="ss">https</span><span class="p">:</span><span class="sr">//</span><span class="n">kubernetes</span><span class="o">.</span><span class="n">io</span><span class="o">/</span><span class="n">zh</span><span class="o">/</span><span class="n">docs</span><span class="o">/</span><span class="n">concepts</span><span class="o">/</span><span class="n">scheduling</span><span class="o">-</span><span class="n">eviction</span><span class="o">/</span><span class="n">assign</span><span class="o">-</span><span class="n">pod</span><span class="o">-</span><span class="n">node</span><span class="o">/</span>
<span class="c1">#首先查询下node节点上面的标签，是否有对应得lable标签然后在操作</span>
<span class="o">[</span><span class="n">root</span><span class="vi">@k8s</span><span class="o">-</span><span class="n">node1</span> <span class="o">~]</span><span class="c1"># kubectl  get nodes   --show-labels </span>
<span class="o">[</span><span class="n">root</span><span class="vi">@k8s</span><span class="o">-</span><span class="n">node1</span> <span class="o">~]</span><span class="c1"># vim nodeSelector.yaml </span>
<span class="ss">apiVersion</span><span class="p">:</span> <span class="n">v1</span>
<span class="ss">kind</span><span class="p">:</span> <span class="no">Pod</span>
<span class="ss">metadata</span><span class="p">:</span>
  <span class="nb">name</span><span class="p">:</span> <span class="n">nginxkusc00612</span>
  <span class="ss">labels</span><span class="p">:</span>
    <span class="ss">env</span><span class="p">:</span> <span class="nb">test</span>
<span class="ss">spec</span><span class="p">:</span>
  <span class="ss">containers</span><span class="p">:</span>
  <span class="o">-</span> <span class="nb">name</span><span class="p">:</span> <span class="n">nginx</span>
    <span class="ss">image</span><span class="p">:</span> <span class="n">nginx</span>
    <span class="ss">imagePullPolicy</span><span class="p">:</span> <span class="no">IfNotPresent</span>
  <span class="ss">nodeSelector</span><span class="p">:</span>
    <span class="ss">disktype</span><span class="p">:</span> <span class="n">ssd</span>

<span class="o">[</span><span class="n">root</span><span class="vi">@k8s</span><span class="o">-</span><span class="n">node1</span> <span class="o">~]</span><span class="c1"># kubectl  apply -f nodeSelector.yaml </span>
<span class="n">pod</span><span class="o">/</span><span class="n">nginxkusc00612</span> <span class="n">created</span>

<span class="o">[</span><span class="n">root</span><span class="vi">@k8s</span><span class="o">-</span><span class="n">node1</span> <span class="o">~]</span><span class="c1"># kubectl  get pods nginxkusc00612 </span>
<span class="no">NAME</span>             <span class="no">READY</span>   <span class="no">STATUS</span>    <span class="no">RESTARTS</span>   <span class="no">AGE</span>
<span class="n">nginxkusc00612</span>   <span class="mi">1</span><span class="o">/</span><span class="mi">1</span>     <span class="no">Running</span>   <span class="mi">0</span>          <span class="mi">3</span><span class="n">m</span>
</code></pre></div>
<h3 id="7">试题7<a class="headerlink" href="#7" title="Permanent link">¶</a></h3>
<div class="highlight"><pre><span></span><code><span class="no">Set</span> <span class="n">configuration</span> <span class="n">context</span> <span class="vg">$kubectl</span> <span class="n">config</span> <span class="n">use</span><span class="o">-</span><span class="n">context</span> <span class="n">k8s</span><span class="o">.</span> <span class="no">Create</span> <span class="n">a</span> <span class="n">deployment</span> <span class="n">as</span> <span class="ss">follows</span><span class="p">:</span> <span class="ss">Name</span><span class="p">:</span> <span class="n">nginxapp</span> <span class="no">Using</span> <span class="n">container</span> <span class="n">nginx</span> <span class="n">with</span> <span class="n">version</span> <span class="mi">1</span><span class="o">.</span><span class="mi">11</span><span class="o">.</span><span class="mi">9</span><span class="o">-</span><span class="n">alpine</span><span class="o">.</span> <span class="no">The</span> <span class="n">deployment</span> <span class="n">should</span> <span class="n">contain</span> <span class="mi">3</span> <span class="n">replicas</span><span class="o">.</span> <span class="no">Next</span><span class="p">,</span> <span class="n">deploy</span> <span class="n">the</span> <span class="n">app</span> <span class="n">with</span> <span class="kp">new</span> <span class="n">version</span> <span class="mi">1</span><span class="o">.</span><span class="mi">12</span><span class="o">.</span><span class="mi">0</span><span class="o">-</span><span class="n">alpine</span> <span class="n">by</span> <span class="n">performing</span> <span class="n">a</span> <span class="n">rolling</span> <span class="n">update</span> <span class="ow">and</span> <span class="n">record</span> <span class="n">that</span> <span class="n">update</span><span class="o">.</span><span class="n">Finally</span><span class="p">,</span><span class="n">rollback</span> <span class="n">that</span> <span class="n">update</span> <span class="n">to</span> <span class="n">the</span> <span class="n">previous</span> <span class="n">version</span> <span class="mi">1</span><span class="o">.</span><span class="mi">11</span><span class="o">.</span><span class="mi">9</span><span class="o">-</span><span class="n">alpine</span><span class="o">.</span>
<span class="err">解析：部署</span><span class="n">deploy</span><span class="p">,</span><span class="err">然后修改进镜像（滚动更新），然后回滚上一版本</span>
<span class="err">官网搜索</span><span class="no">Deployment</span>

<span class="err">解答：</span>  <span class="ss">https</span><span class="p">:</span><span class="sr">//</span><span class="n">kubernetes</span><span class="o">.</span><span class="n">io</span><span class="o">/</span><span class="n">zh</span><span class="o">/</span><span class="n">docs</span><span class="o">/</span><span class="n">concepts</span><span class="o">/</span><span class="n">workloads</span><span class="o">/</span><span class="n">controllers</span><span class="o">/</span><span class="n">deployment</span><span class="o">/</span>
<span class="o">[</span><span class="n">root</span><span class="vi">@k8s</span><span class="o">-</span><span class="n">node1</span> <span class="o">~]</span><span class="c1"># kubectl  create deployment  nginxapp --image=nginx:1.11.9-alpine</span>
<span class="n">deployment</span><span class="o">.</span><span class="n">apps</span><span class="o">/</span><span class="n">nginxapp</span> <span class="n">created</span>
<span class="o">[</span><span class="n">root</span><span class="vi">@k8s</span><span class="o">-</span><span class="n">node1</span> <span class="o">~]</span><span class="c1"># kubectl  scale     deployment   nginxapp  --replicas=3</span>
<span class="n">deployment</span><span class="o">.</span><span class="n">apps</span><span class="o">/</span><span class="n">nginxapp</span> <span class="n">scaled</span>

<span class="o">[</span><span class="n">root</span><span class="vi">@k8s</span><span class="o">-</span><span class="n">node1</span> <span class="o">~]</span><span class="c1"># kubectl set image  deployment/nginxapp nginx=nginx:1.12.0-alpine --record=true</span>
<span class="n">deployment</span><span class="o">.</span><span class="n">apps</span><span class="o">/</span><span class="n">nginxapp</span> <span class="n">image</span> <span class="n">updated</span>
<span class="o">[</span><span class="n">root</span><span class="vi">@k8s</span><span class="o">-</span><span class="n">node1</span> <span class="o">~]</span><span class="c1"># kubectl  rollout  undo   deployment.apps/nginxapp </span>
</code></pre></div>
<h3 id="8">试题8<a class="headerlink" href="#8" title="Permanent link">¶</a></h3>
<div class="highlight"><pre><span></span><code><span class="no">Set</span> <span class="n">configuration</span> <span class="n">context</span> <span class="vg">$kubectl</span> <span class="n">config</span> <span class="n">use</span><span class="o">-</span><span class="n">context</span> <span class="n">k8s</span> <span class="no">Create</span> <span class="ow">and</span> <span class="n">configure</span> <span class="n">the</span> <span class="n">service</span> <span class="n">front</span><span class="o">-</span><span class="n">endservice</span> <span class="n">so</span> <span class="n">it</span><span class="err">’</span><span class="n">s</span> <span class="n">accessible</span> <span class="n">through</span> <span class="no">NodePort</span><span class="o">/</span><span class="no">ClusterIp</span> <span class="ow">and</span> <span class="n">routes</span> <span class="n">to</span> <span class="n">the</span> <span class="n">existing</span> <span class="n">pod</span> <span class="n">named</span> <span class="n">nginxkusc00612</span>
<span class="err">解析：创建</span><span class="n">service</span><span class="err">，指定后端到已有</span><span class="ss">pod</span><span class="p">:</span> <span class="n">nginxkusc00612</span>

<span class="err">解答：</span> <span class="ss">https</span><span class="p">:</span><span class="sr">//</span><span class="n">kubernetes</span><span class="o">.</span><span class="n">io</span><span class="o">/</span><span class="n">zh</span><span class="o">/</span><span class="n">docs</span><span class="o">/</span><span class="n">tasks</span><span class="o">/</span><span class="n">access</span><span class="o">-</span><span class="n">application</span><span class="o">-</span><span class="n">cluster</span><span class="o">/</span><span class="n">connecting</span><span class="o">-</span><span class="n">frontend</span><span class="o">-</span><span class="n">backend</span><span class="o">/</span>

<span class="c1">#由于没有验证成功，待后续在验证。找不到Endpoints</span>
<span class="o">[</span><span class="n">root</span><span class="vi">@k8s</span><span class="o">-</span><span class="n">node1</span> <span class="o">~]</span><span class="c1"># cat service.yaml </span>
<span class="ss">apiVersion</span><span class="p">:</span> <span class="n">v1</span>
<span class="ss">kind</span><span class="p">:</span> <span class="no">Service</span>
<span class="ss">metadata</span><span class="p">:</span>
  <span class="nb">name</span><span class="p">:</span> <span class="n">pod</span><span class="o">-</span><span class="n">service</span>
<span class="ss">spec</span><span class="p">:</span>
  <span class="ss">selector</span><span class="p">:</span>
    <span class="ss">app</span><span class="p">:</span> <span class="n">front</span><span class="o">-</span><span class="k">end</span>
  <span class="ss">type</span><span class="p">:</span> <span class="no">NodePort</span>
  <span class="ss">ports</span><span class="p">:</span>
  <span class="o">-</span> <span class="ss">protocol</span><span class="p">:</span> <span class="no">TCP</span>
    <span class="ss">port</span><span class="p">:</span> <span class="mi">80</span>
    <span class="ss">targetPort</span><span class="p">:</span> <span class="n">http</span>
</code></pre></div>
<h3 id="9">试题9<a class="headerlink" href="#9" title="Permanent link">¶</a></h3>
<div class="highlight"><pre><span></span><code>Set configuration context $kubectl config use-context k8s Create a Pod as follows: Name: jenkins Using image: jenkins In a new Kubernetes namespace named pro-test
解析：在新的命名空间中创建jenkins的pod

解答：
首先查询是否有pro-test名称空间
[root@k8s-node1 ~]# kubectl  get namespaces  pro-test 

然后在创建
[root@k8s-node1 ~]# kubectl    run   jenkins   --image=jenkins  --namespace=pro-test 

然后在验证：
[root@k8s-node1 ~]# kubectl  get pods -n pro-test 
</code></pre></div>
<h3 id="10">试题10<a class="headerlink" href="#10" title="Permanent link">¶</a></h3>
<div class="highlight"><pre><span></span><code>Set configuration context $kubectl config use-context k8s Create a deployment spec file that will: Launch 7 replicas of the redis image with the label : app_enb_stage=dev Deployment name: kual00612 Save a copy of this spec file to /opt/KUAL00612/deploy_spec.yaml (or .json) When you are done,clean up(delete) any new k8s API objects that you produced during this task

翻译：设置配置上下文$kubectl config use context k8s创建一个部署规范文件，该文件将：启动redis映像的7个副本，标签为：app_enb_stage=dev deployment name:kual00612将此规范文件的副本保存到/opt/kual00612/deploy_spec.yaml（或.json）完成后，清理（删除）您在此任务期间生成的任何新的k8sapi对象
解析：创建7副本的redis的deploy，指明标签，然后把yaml保存在指定位置

解答： https://kubernetes.io/docs/concepts/workloads/controllers/deployment/
[root@k8s-node1 ~]# vim ReplicaSet.yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: kual00612
  labels:
    app_enb_stage: dev
spec:
  replicas: 7
  selector:
    matchLabels:
      app: kual00612
  template:
    metadata:
      labels:
        app: kual00612
    spec:
      containers:
      - name: redis
        image: redis

验证是否正常：
[root@k8s-node1 ~]# kubectl  get pods |grep kual00612|grep  Running|wc -l

然后在把yaml复制到/opt/KUAL00612/deploy_spec.yaml
cat ReplicaSet.yaml &gt;  /opt/KUAL00612/deploy_spec.yaml
</code></pre></div>
<h3 id="11">试题11<a class="headerlink" href="#11" title="Permanent link">¶</a></h3>
<div class="highlight"><pre><span></span><code><span class="n">Set</span><span class="w"> </span><span class="n">configuration</span><span class="w"> </span><span class="n">context</span><span class="w"> </span><span class="n">$kubectl</span><span class="w"> </span><span class="n">config</span><span class="w"> </span><span class="n">use</span><span class="o">-</span><span class="n">context</span><span class="w"> </span><span class="n">k8s</span><span class="w"> </span><span class="n">Create</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="o">/</span><span class="n">opt</span><span class="o">/</span><span class="n">KUCC00612</span><span class="o">/</span><span class="n">kucc00612</span><span class="p">.</span><span class="n">txt</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">lists</span><span class="w"> </span><span class="n">all</span><span class="w"> </span><span class="n">pods</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">implement</span><span class="w"> </span><span class="n">Service</span><span class="w"> </span><span class="n">foo</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">Namespace</span><span class="w"> </span><span class="n">production</span><span class="p">.</span><span class="w"> </span><span class="n">The</span><span class="w"> </span><span class="n">format</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="n">should</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">one</span><span class="w"> </span><span class="n">pod</span><span class="w"> </span><span class="n">name</span><span class="w"> </span><span class="n">per</span><span class="w"> </span><span class="n">line</span><span class="p">.</span><span class="w"></span>
<span class="err">解析：满足</span><span class="n">foo</span><span class="w"> </span><span class="n">service选择规则的pod</span><span class="err">，并把名字写入某个文件</span><span class="w"></span>

<span class="n">kubecet</span><span class="w"> </span><span class="kd">get</span><span class="w"> </span><span class="n">svc</span><span class="w">   </span><span class="o">-</span><span class="n">n</span><span class="w"> </span><span class="n">production</span><span class="w">  </span><span class="o">--</span><span class="n">show</span><span class="o">-</span><span class="n">lables</span><span class="o">|</span><span class="n">grep</span><span class="w"> </span><span class="n">foo</span><span class="w"></span>
<span class="n">kubectl</span><span class="w">  </span><span class="kd">get</span><span class="w"> </span><span class="n">pods</span><span class="w"> </span><span class="o">-</span><span class="n">nccod45</span><span class="w"> </span><span class="o">-</span><span class="n">l</span><span class="w"> </span><span class="n">name</span><span class="o">=</span><span class="n">foo</span><span class="w"> </span><span class="o">|</span><span class="n">grep</span><span class="w"> </span><span class="o">-</span><span class="n">v</span><span class="w"> </span><span class="n">NAME</span><span class="o">|</span><span class="n">awk</span><span class="w"> </span><span class="s1">'{print $1}'</span><span class="w"> </span><span class="o">&gt;&gt;</span><span class="w">   </span><span class="o">/</span><span class="n">opt</span><span class="o">/</span><span class="n">KUCC00302</span><span class="o">/</span><span class="n">kucc00302</span><span class="p">.</span><span class="n">txt</span><span class="w"></span>
</code></pre></div>
<h3 id="12">试题12<a class="headerlink" href="#12" title="Permanent link">¶</a></h3>
<div class="highlight"><pre><span></span><code><span class="n">Set</span><span class="w"> </span><span class="n">configuration</span><span class="w"> </span><span class="n">context</span><span class="w"> </span><span class="n">$kubectl</span><span class="w"> </span><span class="n">config</span><span class="w"> </span><span class="n">use</span><span class="o">-</span><span class="n">context</span><span class="w"> </span><span class="n">k8s</span><span class="w"> </span><span class="n">Create</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">Kubernetes</span><span class="w"> </span><span class="n">Secret</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nl">follows:</span><span class="w"> </span><span class="nl">Name:</span><span class="w"> </span><span class="k">super</span><span class="o">-</span><span class="n">secret</span><span class="w"> </span><span class="nl">credential:</span><span class="w"> </span><span class="n">blob</span><span class="p">,</span><span class="w"> </span><span class="n">Create</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">Pod</span><span class="w"> </span><span class="n">named</span><span class="w"> </span><span class="n">pod</span><span class="o">-</span><span class="n">secrets</span><span class="o">-</span><span class="n">via</span><span class="o">-</span><span class="n">file</span><span class="w"> </span><span class="n">using</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">redis</span><span class="w"> </span><span class="n">image</span><span class="w"> </span><span class="n">which</span><span class="w"> </span><span class="n">mounts</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">secret</span><span class="w"> </span><span class="n">named</span><span class="w"> </span><span class="k">super</span><span class="o">-</span><span class="n">secret</span><span class="w"> </span><span class="n">at</span><span class="w"> </span><span class="o">/</span><span class="n">secrets</span><span class="p">.</span><span class="w"> </span><span class="n">Create</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">second</span><span class="w"> </span><span class="n">Pod</span><span class="w"> </span><span class="n">named</span><span class="w"> </span><span class="n">pod</span><span class="o">-</span><span class="n">secretsvia</span><span class="o">-</span><span class="n">env</span><span class="w"> </span><span class="n">using</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">redis</span><span class="w"> </span><span class="n">image</span><span class="p">,</span><span class="w"> </span><span class="n">which</span><span class="w"> </span><span class="n">exports</span><span class="w"> </span><span class="n">credential</span><span class="w"> </span><span class="k">as</span><span class="w"> </span>
<span class="err">翻译：创建一个</span><span class="n">Kubernetes</span><span class="w"> </span><span class="n">Secret</span><span class="err">，如下所示：</span><span class="nl">Name:</span><span class="k">super</span><span class="w"> </span><span class="n">Secret</span><span class="w"> </span><span class="nl">credential:</span><span class="n">blob</span><span class="err">，使用</span><span class="n">redis映像创建一个名为Pod</span><span class="w"> </span><span class="n">secrets的Pod</span><span class="err">，该映像在</span><span class="o">/</span><span class="n">secrets处挂载一个名为super</span><span class="w"> </span><span class="n">Secret的机密</span><span class="err">。使用</span><span class="n">redis映像创建第二个名为Pod</span><span class="w"> </span><span class="n">secretsvia</span><span class="w"> </span><span class="n">env的Pod</span><span class="err">，它将凭证导出为凭证</span><span class="w"></span>
<span class="err">解析：创建</span><span class="n">secret</span><span class="err">，并在</span><span class="n">pod中通过Volume和环境变量使用该secret</span><span class="w"></span>

<span class="err">解答：</span><span class="nl">https:</span><span class="c1">//kubernetes.io/zh/docs/concepts/configuration/secret/</span><span class="w"></span>
<span class="p">[</span><span class="n">root</span><span class="nd">@k8s</span><span class="o">-</span><span class="n">node1</span><span class="w"> </span><span class="o">~</span><span class="p">]</span><span class="err">#</span><span class="w">  </span><span class="n">echo</span><span class="w"> </span><span class="n">blob</span><span class="w"> </span><span class="o">|</span><span class="n">base64</span><span class="w"></span>
<span class="n">YmxvYgo</span><span class="o">=</span><span class="w"></span>
</code></pre></div>
<h3 id="13">试题13<a class="headerlink" href="#13" title="Permanent link">¶</a></h3>
<div class="highlight"><pre><span></span><code>Set configuration context $kubectl config use-context k8s Create a pod as follows: Name: nonpersistent-redis Container image: redis Named-volume with name: cache-control Mount path : /data/redis It should launch in the pre-prod namespace and the volume MUST NOT be persistent.
解析：创建一个pod，并挂载volume

解答： https://kubernetes.io/zh/docs/concepts/storage/volumes/
[root@k8s-node1 ~]# cat volumes.yaml 
apiVersion: v1
kind: Pod
metadata:
  name: nonpersistent-redis
spec:
  containers:
  - image: redis
    name: nonpersistent-redis
    volumeMounts:
    - mountPath: /data/redis
      name: cache-control
  volumes:
  - name: cache-control
    emptyDir: {}
</code></pre></div>
<h3 id="14">试题14<a class="headerlink" href="#14" title="Permanent link">¶</a></h3>
<div class="highlight"><pre><span></span><code><span class="no">Set</span> <span class="n">configuration</span> <span class="n">context</span> <span class="vg">$kubectl</span> <span class="n">config</span> <span class="n">use</span><span class="o">-</span><span class="n">context</span> <span class="n">k8s</span> <span class="no">Scale</span> <span class="n">the</span> <span class="n">deployment</span> <span class="n">webserver</span> <span class="n">to</span> <span class="mi">6</span> <span class="n">pods</span>
<span class="err">解析：扩缩容</span>

<span class="err">解答：</span><span class="ss">https</span><span class="p">:</span><span class="sr">//</span><span class="n">kubernetes</span><span class="o">.</span><span class="n">io</span><span class="o">/</span><span class="n">docs</span><span class="o">/</span><span class="n">reference</span><span class="o">/</span><span class="n">generated</span><span class="o">/</span><span class="n">kubectl</span><span class="o">/</span><span class="n">kubectl</span><span class="o">-</span><span class="n">commands</span><span class="c1">#scale </span>
<span class="o">[</span><span class="n">root</span><span class="vi">@k8s</span><span class="o">-</span><span class="n">node1</span> <span class="o">~]</span><span class="c1"># kubectl  scale --replicas=6 webserver</span>
</code></pre></div>
<h3 id="15">试题15<a class="headerlink" href="#15" title="Permanent link">¶</a></h3>
<div class="highlight"><pre><span></span><code><span class="n">Set</span><span class="w"> </span><span class="n">configuration</span><span class="w"> </span><span class="n">context</span><span class="w"> </span><span class="n">$kubectl</span><span class="w"> </span><span class="n">config</span><span class="w"> </span><span class="n">use</span><span class="o">-</span><span class="n">context</span><span class="w"> </span><span class="n">k8s</span><span class="w"> </span><span class="n">Check</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">see</span><span class="w"> </span><span class="n">how</span><span class="w"> </span><span class="n">many</span><span class="w"> </span><span class="n">nodes</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">ready</span><span class="w"> </span><span class="p">(</span><span class="n">not</span><span class="w"> </span><span class="n">including</span><span class="w"> </span><span class="n">nodes</span><span class="w"> </span><span class="n">tainted</span><span class="w"> </span><span class="n">NoSchedule</span><span class="p">)</span><span class="w"> </span><span class="n">and</span><span class="w"> </span><span class="n">write</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">number</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="o">/</span><span class="n">opt</span><span class="o">/</span><span class="n">nodenum</span><span class="p">.</span><span class="w"></span>
<span class="err">解析：有多少节点是</span><span class="n">ready状态的</span><span class="err">，不包含被打了</span><span class="n">NoSchedule污点的节点</span><span class="w"></span>
<span class="n">kubectl</span><span class="w"> </span><span class="n">describe</span><span class="w"> </span><span class="n">nodes</span><span class="w"> </span><span class="err">`</span><span class="n">kubectl</span><span class="w"> </span><span class="kd">get</span><span class="w"> </span><span class="n">nodes</span><span class="o">|</span><span class="n">grep</span><span class="w"> </span><span class="n">Ready</span><span class="o">|</span><span class="n">awk</span><span class="w"> </span><span class="s1">'{print $1}'</span><span class="err">`</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">grep</span><span class="w"> </span><span class="n">Taints</span><span class="o">|</span><span class="n">grep</span><span class="w"> </span><span class="o">-</span><span class="n">vc</span><span class="w"> </span><span class="n">NoSchedule</span><span class="w"> </span><span class="o">&gt;</span><span class="w">  </span><span class="o">/</span><span class="n">opt</span><span class="o">/</span><span class="n">nodenum</span><span class="w"></span>
</code></pre></div>
<h3 id="16">试题16<a class="headerlink" href="#16" title="Permanent link">¶</a></h3>
<div class="highlight"><pre><span></span><code><span class="no">Set</span> <span class="n">configuration</span> <span class="n">context</span> <span class="vg">$kubectl</span> <span class="n">config</span> <span class="n">use</span><span class="o">-</span><span class="n">context</span> <span class="n">k8s</span> <span class="no">Create</span> <span class="n">a</span> <span class="n">deployment</span> <span class="n">as</span> <span class="ss">follows</span><span class="p">:</span> <span class="ss">Name</span><span class="p">:</span> <span class="n">nginxdns</span> <span class="no">Exposed</span> <span class="n">via</span> <span class="n">a</span> <span class="n">service</span> <span class="p">:</span> <span class="n">nginx</span><span class="o">-</span><span class="n">dns</span> <span class="no">Ensure</span> <span class="n">that</span> <span class="n">the</span> <span class="n">service</span> <span class="o">&amp;</span> <span class="n">pod</span> <span class="n">are</span> <span class="n">accessible</span> <span class="n">via</span> <span class="n">their</span> <span class="n">respective</span> <span class="no">DNS</span> <span class="n">records</span> <span class="no">The</span> <span class="n">container</span><span class="p">(</span><span class="n">s</span><span class="p">)</span> <span class="n">within</span> <span class="n">any</span> <span class="no">Pod</span><span class="p">(</span><span class="n">s</span><span class="p">)</span> <span class="n">running</span> <span class="n">as</span> <span class="n">a</span> <span class="n">part</span> <span class="n">of</span> <span class="n">this</span> <span class="n">deployment</span> <span class="n">should</span> <span class="n">use</span> <span class="n">the</span> <span class="n">nginx</span> <span class="n">image</span><span class="o">.</span> <span class="no">Next</span><span class="p">,</span> <span class="n">use</span> <span class="n">the</span> <span class="n">utility</span> <span class="n">nslookup</span> <span class="n">to</span> <span class="n">look</span> <span class="n">up</span> <span class="n">the</span> <span class="no">DNS</span> <span class="n">records</span> <span class="n">of</span> <span class="n">the</span> <span class="n">service</span> <span class="o">&amp;</span> <span class="n">pod</span> <span class="ow">and</span> <span class="n">write</span> <span class="n">the</span> <span class="n">output</span> <span class="n">to</span> <span class="sr">/opt/se</span><span class="n">rvice</span><span class="o">.</span><span class="n">dns</span> <span class="ow">and</span> <span class="sr">/opt/</span><span class="n">pod</span><span class="o">.</span><span class="n">dns</span> <span class="n">respectively</span><span class="o">.</span> <span class="no">Ensure</span> <span class="n">you</span> <span class="n">use</span> <span class="n">the</span> <span class="ss">busybox</span><span class="p">:</span><span class="mi">1</span><span class="o">.</span><span class="mi">28</span> <span class="n">image</span> <span class="p">(</span><span class="ow">or</span> <span class="n">earlier</span><span class="p">)</span> <span class="k">for</span> <span class="n">any</span> <span class="n">testing</span><span class="p">,</span> <span class="n">an</span> <span class="n">the</span> <span class="n">latest</span> <span class="n">release</span> <span class="n">has</span> <span class="n">an</span> <span class="n">upstream</span> <span class="n">bug</span> <span class="n">which</span> <span class="n">impacts</span> <span class="n">the</span> <span class="n">use</span> <span class="n">of</span> <span class="n">nslookup</span>
<span class="err">解析：创建</span><span class="n">service和deployment</span><span class="err">，然后解析</span><span class="n">service的dns和pod的dns</span><span class="err">，并把解析记录保存到指定文件</span>

<span class="err">解答：</span> <span class="err">参考网址</span><span class="ss">:https:/</span><span class="o">/</span><span class="n">kubernetes</span><span class="o">.</span><span class="n">io</span><span class="o">/</span><span class="n">docs</span><span class="o">/</span><span class="n">tasks</span><span class="o">/</span><span class="n">access</span><span class="o">-</span><span class="n">application</span><span class="o">-</span><span class="n">cluster</span><span class="o">/</span><span class="n">connecting</span><span class="o">-</span><span class="n">frontend</span><span class="o">-</span><span class="n">backend</span><span class="o">/</span>
      <span class="ss">https</span><span class="p">:</span><span class="sr">//</span><span class="n">kubernetes</span><span class="o">.</span><span class="n">io</span><span class="o">/</span><span class="n">zh</span><span class="o">/</span><span class="n">docs</span><span class="o">/</span><span class="n">concepts</span><span class="o">/</span><span class="n">workloads</span><span class="o">/</span><span class="n">pods</span><span class="o">/</span><span class="n">init</span><span class="o">-</span><span class="n">containers</span><span class="o">/</span>

<span class="o">[</span><span class="n">root</span><span class="vi">@k8s</span><span class="o">-</span><span class="n">node1</span> <span class="n">dns</span><span class="o">]</span><span class="c1"># cat deployment.yaml </span>
<span class="ss">apiVersion</span><span class="p">:</span> <span class="n">apps</span><span class="o">/</span><span class="n">v1</span>
<span class="ss">kind</span><span class="p">:</span> <span class="no">Deployment</span>
<span class="ss">metadata</span><span class="p">:</span>
  <span class="nb">name</span><span class="p">:</span> <span class="n">backend</span>
<span class="ss">spec</span><span class="p">:</span>
  <span class="ss">selector</span><span class="p">:</span>
    <span class="ss">matchLabels</span><span class="p">:</span>
      <span class="ss">app</span><span class="p">:</span> <span class="n">nginxdns</span>
  <span class="ss">replicas</span><span class="p">:</span> <span class="mi">1</span>
  <span class="ss">template</span><span class="p">:</span>
    <span class="ss">metadata</span><span class="p">:</span>
      <span class="ss">labels</span><span class="p">:</span>
        <span class="ss">app</span><span class="p">:</span> <span class="n">nginxdns</span>
    <span class="ss">spec</span><span class="p">:</span>
      <span class="ss">containers</span><span class="p">:</span>
        <span class="o">-</span> <span class="nb">name</span><span class="p">:</span> <span class="n">nginx</span>
          <span class="ss">image</span><span class="p">:</span> <span class="n">nginx</span>
          <span class="ss">ports</span><span class="p">:</span>
            <span class="o">-</span> <span class="nb">name</span><span class="p">:</span> <span class="n">http</span>
              <span class="ss">containerPort</span><span class="p">:</span> <span class="mi">80</span>
<span class="o">---</span>
<span class="ss">apiVersion</span><span class="p">:</span> <span class="n">v1</span>
<span class="ss">kind</span><span class="p">:</span> <span class="no">Service</span>
<span class="ss">metadata</span><span class="p">:</span>
  <span class="nb">name</span><span class="p">:</span> <span class="n">nginxdns</span>
<span class="ss">spec</span><span class="p">:</span>
  <span class="ss">selector</span><span class="p">:</span>
    <span class="ss">app</span><span class="p">:</span> <span class="n">nginxdns</span>
  <span class="ss">ports</span><span class="p">:</span>
  <span class="o">-</span> <span class="ss">protocol</span><span class="p">:</span> <span class="no">TCP</span>
    <span class="ss">port</span><span class="p">:</span> <span class="mi">80</span>
    <span class="ss">targetPort</span><span class="p">:</span> <span class="n">http</span>
<span class="o">---</span>
<span class="ss">apiVersion</span><span class="p">:</span> <span class="n">v1</span>
<span class="ss">kind</span><span class="p">:</span> <span class="no">Pod</span>
<span class="ss">metadata</span><span class="p">:</span>
  <span class="nb">name</span><span class="p">:</span> <span class="n">busybox</span><span class="o">-</span><span class="nb">test</span>
  <span class="ss">labels</span><span class="p">:</span>
    <span class="ss">app</span><span class="p">:</span> <span class="n">busybox</span><span class="o">-</span><span class="nb">test</span>
<span class="ss">spec</span><span class="p">:</span>
  <span class="ss">containers</span><span class="p">:</span>
  <span class="o">-</span> <span class="nb">name</span><span class="p">:</span> <span class="n">myapp</span><span class="o">-</span><span class="n">container</span>
    <span class="ss">image</span><span class="p">:</span> <span class="ss">busybox</span><span class="p">:</span><span class="mi">1</span><span class="o">.</span><span class="mi">28</span>
    <span class="ss">command</span><span class="p">:</span> <span class="o">[</span><span class="s1">'sh'</span><span class="p">,</span> <span class="s1">'-c'</span><span class="p">,</span> <span class="s1">'echo The app is running! &amp;&amp; sleep 3600'</span><span class="o">]</span>

<span class="o">[</span><span class="n">root</span><span class="vi">@k8s</span><span class="o">-</span><span class="n">node1</span> <span class="n">dns</span><span class="o">]</span><span class="c1">#  kubectl exec -ti busybox-test -- nslookup nginxdns   #解析svc地址 &gt;/opt/service.dns</span>

<span class="n">kubectl</span> <span class="nb">exec</span> <span class="o">-</span><span class="n">ti</span> <span class="n">busybox</span><span class="o">-</span><span class="nb">test</span> <span class="o">--</span> <span class="n">nslookup</span>  <span class="mi">10</span><span class="o">.</span><span class="mi">244</span><span class="o">.</span><span class="mi">1</span><span class="o">.</span><span class="mi">52</span>   <span class="o">&gt;</span> <span class="sr">/opt/</span><span class="n">pod</span><span class="o">.</span><span class="n">dns</span><span class="c1">#Pod ip解析 </span>
</code></pre></div>
<h3 id="17">试题17<a class="headerlink" href="#17" title="Permanent link">¶</a></h3>
<div class="highlight"><pre><span></span><code><span class="no">No</span> <span class="n">configuration</span> <span class="n">context</span> <span class="n">change</span> <span class="n">required</span> <span class="k">for</span> <span class="n">this</span> <span class="n">item</span> <span class="no">Create</span> <span class="n">a</span> <span class="n">snapshot</span> <span class="n">of</span> <span class="n">the</span> <span class="n">etcd</span> <span class="n">instance</span> <span class="n">running</span> <span class="n">at</span> <span class="ss">https</span><span class="p">:</span><span class="sr">//</span><span class="mi">127</span><span class="o">.</span><span class="mi">0</span><span class="o">.</span><span class="mi">0</span><span class="o">.</span><span class="mi">1</span><span class="p">:</span><span class="mi">2379</span> <span class="n">saving</span> <span class="n">the</span> <span class="n">snapshot</span> <span class="n">to</span> <span class="n">the</span> <span class="n">file</span> <span class="n">path</span> <span class="sr">/data/</span><span class="n">backup</span><span class="o">/</span><span class="n">etcd</span><span class="o">-</span><span class="n">snapshot</span><span class="o">.</span><span class="n">db</span> <span class="no">The</span> <span class="n">etcd</span> <span class="n">instance</span> <span class="n">is</span> <span class="n">running</span> <span class="n">etcd</span> <span class="n">version</span> <span class="mi">3</span><span class="o">.</span><span class="mi">2</span><span class="o">.</span><span class="mi">18</span> <span class="no">The</span> <span class="n">following</span> <span class="no">TLS</span> <span class="n">certificates</span><span class="o">/</span><span class="n">key</span> <span class="n">are</span> <span class="n">supplied</span> <span class="k">for</span> <span class="n">connecting</span> <span class="n">to</span> <span class="n">the</span> <span class="n">server</span> <span class="n">with</span> <span class="n">etcdctl</span> <span class="no">CA</span> <span class="ss">certificate</span><span class="p">:</span> <span class="sr">/opt/</span><span class="no">KUCM0612</span><span class="o">/</span><span class="n">ca</span><span class="o">.</span><span class="n">crt</span> <span class="no">Client</span> <span class="ss">certificate</span><span class="p">:</span> <span class="sr">/opt/</span><span class="no">KUCM00612</span><span class="o">/</span><span class="n">etcdclient</span><span class="o">.</span><span class="n">crt</span> <span class="no">Client</span> <span class="ss">key</span><span class="p">:</span> <span class="sr">/opt/</span><span class="no">KUCM00612</span><span class="o">/</span><span class="n">etcd</span><span class="o">-</span><span class="n">client</span><span class="o">.</span><span class="n">key</span>

<span class="err">解答：</span><span class="ss">https</span><span class="p">:</span><span class="sr">//</span><span class="n">kubernetes</span><span class="o">.</span><span class="n">io</span><span class="o">/</span><span class="n">zh</span><span class="o">/</span><span class="n">docs</span><span class="o">/</span><span class="n">tasks</span><span class="o">/</span><span class="n">administer</span><span class="o">-</span><span class="n">cluster</span><span class="o">/</span><span class="n">configure</span><span class="o">-</span><span class="n">upgrade</span><span class="o">-</span><span class="n">etcd</span><span class="o">/</span>
<span class="err">备份</span><span class="n">etcd</span>
<span class="no">ETCDCTL_API</span><span class="o">=</span><span class="mi">3</span> <span class="n">etcdctl</span> <span class="o">--</span><span class="n">endpoints</span><span class="o">=</span><span class="ss">https</span><span class="p">:</span><span class="sr">//</span><span class="mi">127</span><span class="o">.</span><span class="mi">0</span><span class="o">.</span><span class="mi">0</span><span class="o">.</span><span class="mi">1</span><span class="p">:</span><span class="mi">2379</span> <span class="p">\</span>
  <span class="o">--</span><span class="n">cacert</span><span class="o">=</span><span class="sr">/etc/</span><span class="n">kubernetes</span><span class="o">/</span><span class="n">pki</span><span class="o">/</span><span class="n">etcd</span><span class="o">/</span><span class="n">ca</span><span class="o">.</span><span class="n">crt</span> <span class="o">--</span><span class="n">cert</span><span class="o">=</span><span class="sr">/etc/</span><span class="n">kubernetes</span><span class="o">/</span><span class="n">pki</span><span class="o">/</span><span class="n">etcd</span><span class="o">/</span><span class="n">peer</span><span class="o">.</span><span class="n">crt</span> <span class="o">--</span><span class="n">key</span><span class="o">=</span><span class="sr">/etc/</span><span class="n">kubernetes</span><span class="o">/</span><span class="n">pki</span><span class="o">/</span><span class="n">etcd</span><span class="o">/</span><span class="n">peer</span><span class="o">.</span><span class="n">key</span> <span class="p">\</span>
  <span class="n">snapshot</span> <span class="n">save</span> <span class="sr">/etc/</span><span class="n">kubernetes</span><span class="o">/</span><span class="n">pki</span><span class="o">/</span><span class="n">etcd</span><span class="o">/</span><span class="n">etcd</span><span class="o">-</span><span class="n">snapshot</span><span class="o">-</span><span class="nb">test</span><span class="o">.</span><span class="n">db</span>

<span class="err">验证</span><span class="n">etcd</span>
<span class="no">TCDCTL_API</span><span class="o">=</span><span class="mi">3</span> <span class="n">etcdctl</span> <span class="o">--</span><span class="n">write</span><span class="o">-</span><span class="n">out</span><span class="o">=</span><span class="n">table</span> <span class="n">snapshot</span> <span class="n">status</span> <span class="sr">/etc/</span><span class="n">kubernetes</span><span class="o">/</span><span class="n">pki</span><span class="o">/</span><span class="n">etcd</span><span class="o">/</span><span class="n">etcd</span><span class="o">-</span><span class="n">snapshot</span><span class="o">-</span><span class="nb">test</span><span class="o">.</span><span class="n">db</span>

<span class="err">还原</span><span class="n">etcd</span>
  <span class="no">ETCDCTL_API</span><span class="o">=</span><span class="mi">3</span> <span class="n">etcdctl</span> <span class="o">--</span><span class="n">endpoints</span><span class="o">=</span><span class="ss">https</span><span class="p">:</span><span class="sr">//</span><span class="mi">127</span><span class="o">.</span><span class="mi">0</span><span class="o">.</span><span class="mi">0</span><span class="o">.</span><span class="mi">1</span><span class="p">:</span><span class="mi">2379</span>  <span class="n">snapshot</span> <span class="n">restore</span> <span class="p">\</span>
  <span class="o">--</span><span class="n">cacert</span><span class="o">=</span><span class="sr">/etc/</span><span class="n">kubernetes</span><span class="o">/</span><span class="n">pki</span><span class="o">/</span><span class="n">etcd</span><span class="o">/</span><span class="n">ca</span><span class="o">.</span><span class="n">crt</span> <span class="o">--</span><span class="n">cert</span><span class="o">=</span><span class="sr">/etc/</span><span class="n">kubernetes</span><span class="o">/</span><span class="n">pki</span><span class="o">/</span><span class="n">etcd</span><span class="o">/</span><span class="n">peer</span><span class="o">.</span><span class="n">crt</span> <span class="o">--</span><span class="n">key</span><span class="o">=</span><span class="sr">/etc/</span><span class="n">kubernetes</span><span class="o">/</span><span class="n">pki</span><span class="o">/</span><span class="n">etcd</span><span class="o">/</span><span class="n">peer</span><span class="o">.</span><span class="n">key</span><span class="p">\</span>
  <span class="sr">/etc/</span><span class="n">kubernetes</span><span class="o">/</span><span class="n">pki</span><span class="o">/</span><span class="n">etcd</span><span class="o">/</span><span class="n">etcd</span><span class="o">-</span><span class="n">snapshot</span><span class="o">-</span><span class="nb">test</span><span class="o">.</span><span class="n">db</span> 

<span class="err">然后在重启下</span><span class="n">etcd之后</span><span class="err">，在看下</span><span class="n">nodes和pods</span>
</code></pre></div>
<h3 id="18">试题18<a class="headerlink" href="#18" title="Permanent link">¶</a></h3>
<div class="highlight"><pre><span></span><code><span class="n">Set</span><span class="w"> </span><span class="n">configuration</span><span class="w"> </span><span class="n">context</span><span class="w"> </span><span class="n">$kubectl</span><span class="w"> </span><span class="n">config</span><span class="w"> </span><span class="n">use</span><span class="o">-</span><span class="n">context</span><span class="w"> </span><span class="n">ek8s</span><span class="w"> </span><span class="n">Set</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">node</span><span class="w"> </span><span class="n">labelled</span><span class="w"> </span><span class="kd">with</span><span class="w"> </span><span class="n">name</span><span class="o">=</span><span class="n">ek8s</span><span class="o">-</span><span class="n">node</span><span class="o">-</span><span class="m">1</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">unavailable</span><span class="w"> </span><span class="n">and</span><span class="w"> </span><span class="n">reschedule</span><span class="w"> </span><span class="n">all</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">pods</span><span class="w"> </span><span class="n">running</span><span class="w"> </span><span class="kd">on</span><span class="w"> </span><span class="n">it</span><span class="p">.</span><span class="w"></span>
<span class="err">解析：将标签未</span><span class="n">name</span><span class="o">=</span><span class="n">ek8s</span><span class="o">-</span><span class="n">node</span><span class="o">-</span><span class="m">1</span><span class="err">设置成不可用且把这个节点上面的</span><span class="n">pod调度到其他节点上去</span><span class="err">。其实就是使用</span><span class="n">kubectl</span><span class="w"> </span><span class="n">drain命令</span><span class="w"></span>

<span class="n">kubectl</span><span class="w"> </span><span class="n">cordon</span><span class="w">  </span><span class="n">ek8s</span><span class="o">-</span><span class="n">node</span><span class="o">-</span><span class="m">1</span><span class="w">  </span><span class="err">#先隔离</span><span class="w"></span>
<span class="n">kubectl</span><span class="w"> </span><span class="n">drain</span><span class="w"> </span><span class="n">ek8s</span><span class="o">-</span><span class="n">node</span><span class="o">-</span><span class="m">1</span><span class="w"> </span><span class="o">--</span><span class="n">ignore</span><span class="o">-</span><span class="n">daemonsets</span><span class="w"> </span><span class="o">--</span><span class="n">delete</span><span class="o">-</span><span class="n">local</span><span class="o">-</span><span class="n">data</span><span class="w"> </span><span class="o">--</span><span class="n">force</span><span class="w"></span>
<span class="err">完成后一定要通过</span><span class="w"> </span><span class="kd">get</span><span class="w"> </span><span class="n">nodes</span><span class="w"> </span><span class="err">加以确认</span><span class="w"></span>
</code></pre></div>
<h3 id="19">试题19<a class="headerlink" href="#19" title="Permanent link">¶</a></h3>
<div class="highlight"><pre><span></span><code><span class="n">Set</span><span class="w"> </span><span class="n">configuration</span><span class="w"> </span><span class="n">context</span><span class="w"> </span><span class="n">$kubectl</span><span class="w"> </span><span class="n">config</span><span class="w"> </span><span class="n">use</span><span class="o">-</span><span class="n">context</span><span class="w"> </span><span class="n">wk8s</span><span class="w"> </span><span class="n">A</span><span class="w"> </span><span class="n">Kubernetes</span><span class="w"> </span><span class="n">worker</span><span class="w"> </span><span class="n">node</span><span class="p">,</span><span class="n">labelled</span><span class="w"> </span><span class="kd">with</span><span class="w"> </span><span class="n">name</span><span class="o">=</span><span class="n">wk8s</span><span class="o">-</span><span class="n">node</span><span class="o">-</span><span class="m">0</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">state</span><span class="w"> </span><span class="n">NotReady</span><span class="p">.</span><span class="w"> </span><span class="n">Investigate</span><span class="w"> </span><span class="n">why</span><span class="w"> </span><span class="k">this</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="k">case</span><span class="p">,</span><span class="w"> </span><span class="n">and</span><span class="w"> </span><span class="n">perform</span><span class="w"> </span><span class="n">any</span><span class="w"> </span><span class="n">appropriate</span><span class="w"> </span><span class="n">steps</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">bring</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">node</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">Ready</span><span class="w"> </span><span class="n">state</span><span class="p">,</span><span class="w"> </span><span class="n">Ensuring</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">any</span><span class="w"> </span><span class="n">changes</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">made</span><span class="w"> </span><span class="n">permanent</span><span class="p">.</span><span class="w"> </span><span class="nl">Hints:</span><span class="w"> </span><span class="n">You</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">ssh</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">failed</span><span class="w"> </span><span class="n">node</span><span class="w"> </span><span class="n">using</span><span class="w"> </span><span class="n">$ssh</span><span class="w"> </span><span class="n">wk8s</span><span class="o">-</span><span class="n">node</span><span class="o">-</span><span class="m">0.</span><span class="w"> </span><span class="n">You</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">assume</span><span class="w"> </span><span class="n">elevated</span><span class="w"> </span><span class="n">privileges</span><span class="w"> </span><span class="kd">on</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">node</span><span class="w"> </span><span class="kd">with</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">following</span><span class="w"> </span><span class="n">command</span><span class="w"> </span><span class="n">$sudo</span><span class="w"> </span><span class="o">-</span><span class="n">i</span><span class="w"></span>
<span class="err">题目解析：</span><span class="n">wk8s</span><span class="o">-</span><span class="n">node</span><span class="o">-</span><span class="m">0</span><span class="err">是</span><span class="n">NotReady状态</span><span class="err">，你需要处理下，使其变为</span><span class="n">ready</span><span class="err">，别更改需要永久性</span><span class="w"></span>
</code></pre></div>
<h3 id="20">试题20<a class="headerlink" href="#20" title="Permanent link">¶</a></h3>
<div class="highlight"><pre><span></span><code><span class="m">21</span><span class="err">、</span><span class="n">Set</span><span class="w"> </span><span class="n">configuration</span><span class="w"> </span><span class="n">context</span><span class="w"> </span><span class="n">$kubectl</span><span class="w"> </span><span class="n">config</span><span class="w"> </span><span class="n">use</span><span class="o">-</span><span class="n">context</span><span class="w"> </span><span class="n">wk8s</span><span class="w"> </span><span class="n">Configure</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">kubelet</span><span class="w"> </span><span class="n">system</span><span class="w"> </span><span class="n">managed</span><span class="w"> </span><span class="n">service</span><span class="p">,</span><span class="kd">on</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">node</span><span class="w"> </span><span class="n">labelled</span><span class="w"> </span><span class="kd">with</span><span class="w"> </span><span class="n">name</span><span class="o">=</span><span class="n">wk8s</span><span class="o">-</span><span class="n">node</span><span class="o">-</span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">Launch</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">Pod</span><span class="w"> </span><span class="n">containing</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">single</span><span class="w"> </span><span class="n">container</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">image</span><span class="w"> </span><span class="n">nginx</span><span class="w"> </span><span class="n">named</span><span class="w"> </span><span class="n">myservice</span><span class="w"> </span><span class="n">automatically</span><span class="p">.</span><span class="w"> </span><span class="n">Any</span><span class="w"> </span><span class="n">spec</span><span class="w"> </span><span class="n">files</span><span class="w"> </span><span class="kd">required</span><span class="w"> </span><span class="n">should</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">placed</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">kubernetes</span><span class="o">/</span><span class="n">manifests</span><span class="w"> </span><span class="n">directory</span><span class="w"> </span><span class="kd">on</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">node</span><span class="p">.</span><span class="w"> </span><span class="nl">Hints:</span><span class="w"> </span><span class="n">You</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">ssh</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">failed</span><span class="w"> </span><span class="n">node</span><span class="w"> </span><span class="n">using</span><span class="w"> </span><span class="n">$ssh</span><span class="w"> </span><span class="n">wk8snode</span><span class="o">-</span><span class="m">1.</span><span class="w"> </span><span class="n">You</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">assume</span><span class="w"> </span><span class="n">elevated</span><span class="w"> </span><span class="n">privileges</span><span class="w"> </span><span class="kd">on</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">node</span><span class="w"> </span><span class="kd">with</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">following</span><span class="w"> </span><span class="n">command</span><span class="w"> </span><span class="n">$sudo</span><span class="w"> </span><span class="o">-</span><span class="n">i</span><span class="w"></span>
</code></pre></div>
<h3 id="21">试题21<a class="headerlink" href="#21" title="Permanent link">¶</a></h3>
<div class="highlight"><pre><span></span><code><span class="nt">这题是给你两个节点</span><span class="err">，</span><span class="nt">master1和node1</span><span class="err">，</span><span class="nt">和一个admin</span><span class="p">.</span><span class="nc">conf文件</span><span class="err">，</span><span class="nt">然后让你在这两个节点上部署集群</span><span class="err">。</span><span class="w"></span>
<span class="nt">解析</span><span class="err">：</span><span class="w"></span>
</code></pre></div>
<h3 id="22">试题22<a class="headerlink" href="#22" title="Permanent link">¶</a></h3>
<div class="highlight"><pre><span></span><code><span class="n">Set</span><span class="w"> </span><span class="n">configuration</span><span class="w"> </span><span class="n">context</span><span class="w"> </span><span class="n">$kubectl</span><span class="w"> </span><span class="n">configuse</span><span class="o">-</span><span class="n">context</span><span class="w"> </span><span class="n">bk8s</span><span class="w"> </span><span class="n">Given</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">partially</span><span class="o">-</span><span class="n">functioning</span><span class="w"> </span><span class="n">Kubernetes</span><span class="w"> </span><span class="n">cluser</span><span class="p">,</span><span class="w"> </span><span class="n">identify</span><span class="w"> </span><span class="n">symptoms</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">failure</span><span class="w"> </span><span class="kd">on</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">cluter</span><span class="p">.</span><span class="w"> </span><span class="n">Determine</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">node</span><span class="p">,</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">failing</span><span class="w"> </span><span class="n">service</span><span class="w"> </span><span class="n">and</span><span class="w"> </span><span class="n">take</span><span class="w"> </span><span class="n">actions</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">bring</span><span class="w"> </span><span class="n">up</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">failed</span><span class="w"> </span><span class="n">service</span><span class="w"> </span><span class="n">and</span><span class="w"> </span><span class="n">restore</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">health</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">cluser</span><span class="p">.</span><span class="w"> </span><span class="n">Ensure</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">any</span><span class="w"> </span><span class="n">changes</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">made</span><span class="w"> </span><span class="n">permanently</span><span class="p">.</span><span class="w"> </span><span class="n">The</span><span class="w"> </span><span class="n">worker</span><span class="w"> </span><span class="n">node</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">this</span><span class="w"> </span><span class="n">cluster</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">labelled</span><span class="w"> </span><span class="kd">with</span><span class="w"> </span><span class="n">name</span><span class="o">=</span><span class="n">bk8s</span><span class="o">-</span><span class="n">node</span><span class="o">-</span><span class="m">0</span><span class="w"> </span><span class="nl">Hints:</span><span class="w"> </span><span class="n">You</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">ssh</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">relevant</span><span class="w"> </span><span class="n">nodes</span><span class="w"> </span><span class="n">using</span><span class="w"> </span><span class="n">$ssh</span><span class="w"> </span><span class="n">$</span><span class="p">(</span><span class="n">NODE</span><span class="p">)</span><span class="w"> </span><span class="n">where</span><span class="w"> </span><span class="n">$</span><span class="p">(</span><span class="n">NODE</span><span class="p">)</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">one</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">bk8s</span><span class="o">-</span><span class="n">master</span><span class="o">-</span><span class="m">0</span><span class="w"> </span><span class="n">or</span><span class="w"> </span><span class="n">bk8s</span><span class="o">-</span><span class="n">node</span><span class="o">-</span><span class="m">0.</span><span class="w"> </span><span class="n">You</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">assume</span><span class="w"> </span><span class="n">elevated</span><span class="w"> </span><span class="n">privileges</span><span class="w"> </span><span class="kd">on</span><span class="w"> </span><span class="n">any</span><span class="w"> </span><span class="n">node</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">cluster</span><span class="w"> </span><span class="kd">with</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">following</span><span class="w"> </span><span class="nl">command:</span><span class="w"> </span><span class="n">$</span><span class="w"> </span><span class="n">sudo</span><span class="w"> </span><span class="o">-</span><span class="n">i</span><span class="p">.</span><span class="w"></span>
<span class="err">解析：这题的意思是，有个集群部分功能出现问题，需要你去修一下，需要是永久性的修复。</span><span class="w"></span>
</code></pre></div>
<h3 id="23">试题23<a class="headerlink" href="#23" title="Permanent link">¶</a></h3>
<div class="highlight"><pre><span></span><code><span class="n">Set</span><span class="w"> </span><span class="n">configuration</span><span class="w"> </span><span class="n">context</span><span class="w"> </span><span class="n">$kubectl</span><span class="w"> </span><span class="n">config</span><span class="w"> </span><span class="n">use</span><span class="o">-</span><span class="n">context</span><span class="w"> </span><span class="n">hk8s</span><span class="w"> </span><span class="n">Create</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">persistent</span><span class="w"> </span><span class="n">volume</span><span class="w"> </span><span class="kd">with</span><span class="w"> </span><span class="n">name</span><span class="w"> </span><span class="n">appconfig</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">capacity</span><span class="w"> </span><span class="m">1</span><span class="n">Gi</span><span class="w"> </span><span class="n">and</span><span class="w"> </span><span class="n">access</span><span class="w"> </span><span class="n">mode</span><span class="w"> </span><span class="n">ReadWriteMany</span><span class="p">.</span><span class="w"> </span><span class="n">The</span><span class="w"> </span><span class="n">type</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">volume</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">hostPath</span><span class="w"> </span><span class="n">and</span><span class="w"> </span><span class="n">its</span><span class="w"> </span><span class="n">locationis</span><span class="w"> </span><span class="o">/</span><span class="n">srv</span><span class="o">/</span><span class="n">app</span><span class="o">-</span><span class="n">config</span><span class="w"></span>
</code></pre></div>
<h2 id="cka">CKA模拟题<a class="headerlink" href="#cka" title="Permanent link">¶</a></h2>
<h3 id="1_1">试题1<a class="headerlink" href="#1_1" title="Permanent link">¶</a></h3>
<div class="highlight"><pre><span></span><code>Task weight: <span class="m">1</span>%

You have access to multiple clusters from your main terminal through kubectl contexts. Write all those context names into /opt/course/1/contexts.

Next write a <span class="nb">command</span> to display the current context into /opt/course/1/context_default_kubectl.sh, the <span class="nb">command</span> should use kubectl.

Finally write a second <span class="nb">command</span> doing the same thing into /opt/course/1/context_default_no_kubectl.sh, but without the use of kubectl.
</code></pre></div>
<h3 id="2_1">试题2<a class="headerlink" href="#2_1" title="Permanent link">¶</a></h3>
<div class="highlight"><pre><span></span><code>Task weight: <span class="m">3</span>%

Use context: kubectl config use-context k8s-c1-H

Create a single Pod of image httpd:2.4.41-alpine <span class="k">in</span> Namespace default. The Pod should be named pod1 and the container should be named pod1-container. This Pod should only be scheduled on a master node, <span class="k">do</span> not add new labels any nodes.

Shortly write the reason on why Pods are by default not scheduled on master nodes into /opt/course/2/master_schedule_reason .
</code></pre></div>
<h3 id="3_1">试题3<a class="headerlink" href="#3_1" title="Permanent link">¶</a></h3>
<div class="highlight"><pre><span></span><code><span class="x">Use context: kubectl config use-context k8s-c1-H</span>

<span class="x">There are two Pods named o3db-* in Namespace project-c13. C13 management asked you to scale the Pods down to one replica to save resources. Record the action.</span>
</code></pre></div>
<h3 id="4_1">试题4<a class="headerlink" href="#4_1" title="Permanent link">¶</a></h3>
<div class="highlight"><pre><span></span><code><span class="x">Task weight: 1%</span>

<span class="x">Use context: kubectl config use-context k8s-c1-H</span>

<span class="x">There are two Pods named o3db-* in Namespace project-c13. C13 management asked you to scale the Pods down to one replica to save resources. Record the action.</span>
</code></pre></div>
<h3 id="5_1">试题5<a class="headerlink" href="#5_1" title="Permanent link">¶</a></h3>
<div class="highlight"><pre><span></span><code><span class="n">Task</span><span class="w"> </span><span class="nl">weight:</span><span class="w"> </span><span class="m">4</span><span class="o">%</span><span class="w"></span>

<span class="n">Use</span><span class="w"> </span><span class="nl">context:</span><span class="w"> </span><span class="n">kubectl</span><span class="w"> </span><span class="n">config</span><span class="w"> </span><span class="n">use</span><span class="o">-</span><span class="n">context</span><span class="w"> </span><span class="n">k8s</span><span class="o">-</span><span class="n">c1</span><span class="o">-</span><span class="n">H</span><span class="w"></span>

<span class="n">Do</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">following</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">Namespace</span><span class="w"> </span><span class="k">default</span><span class="p">.</span><span class="w"> </span><span class="n">Create</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">single</span><span class="w"> </span><span class="n">Pod</span><span class="w"> </span><span class="n">named</span><span class="w"> </span><span class="n">ready</span><span class="o">-</span><span class="k">if</span><span class="o">-</span><span class="n">service</span><span class="o">-</span><span class="n">ready</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">image</span><span class="w"> </span><span class="nl">nginx:</span><span class="m">1.16</span><span class="p">.</span><span class="m">1</span><span class="o">-</span><span class="n">alpine</span><span class="p">.</span><span class="w"> </span><span class="n">Configure</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">LivenessProbe</span><span class="w"> </span><span class="n">which</span><span class="w"> </span><span class="n">simply</span><span class="w"> </span><span class="n">runs</span><span class="w"> </span><span class="kc">true</span><span class="p">.</span><span class="w"> </span><span class="n">Also</span><span class="w"> </span><span class="n">configure</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">ReadinessProbe</span><span class="w"> </span><span class="n">which</span><span class="w"> </span><span class="n">does</span><span class="w"> </span><span class="n">check</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">url</span><span class="w"> </span><span class="nl">http:</span><span class="c1">//service-am-i-ready:80 is reachable, you can use wget -T2 -O- http://service-am-i-ready:80 for this. Start the Pod and confirm it isn't ready because of the ReadinessProbe.</span><span class="w"></span>

<span class="n">Create</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">second</span><span class="w"> </span><span class="n">Pod</span><span class="w"> </span><span class="n">named</span><span class="w"> </span><span class="n">am</span><span class="o">-</span><span class="n">i</span><span class="o">-</span><span class="n">ready</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">image</span><span class="w"> </span><span class="nl">nginx:</span><span class="m">1.16</span><span class="p">.</span><span class="m">1</span><span class="o">-</span><span class="n">alpine</span><span class="w"> </span><span class="kd">with</span><span class="w"> </span><span class="n">label</span><span class="w"> </span><span class="nl">id:</span><span class="w"> </span><span class="n">cross</span><span class="o">-</span><span class="n">server</span><span class="o">-</span><span class="n">ready</span><span class="p">.</span><span class="w"> </span><span class="n">The</span><span class="w"> </span><span class="n">already</span><span class="w"> </span><span class="n">existing</span><span class="w"> </span><span class="n">Service</span><span class="w"> </span><span class="n">service</span><span class="o">-</span><span class="n">am</span><span class="o">-</span><span class="n">i</span><span class="o">-</span><span class="n">ready</span><span class="w"> </span><span class="n">should</span><span class="w"> </span><span class="n">now</span><span class="w"> </span><span class="n">have</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">second</span><span class="w"> </span><span class="n">Pod</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">endpoint</span><span class="p">.</span><span class="w"></span>

<span class="n">Now</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">first</span><span class="w"> </span><span class="n">Pod</span><span class="w"> </span><span class="n">should</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">ready</span><span class="w"> </span><span class="n">state</span><span class="p">,</span><span class="w"> </span><span class="n">confirm</span><span class="w"> </span><span class="n">that</span><span class="p">.</span><span class="w"></span>
</code></pre></div>
<h3 id="6_1">试题6<a class="headerlink" href="#6_1" title="Permanent link">¶</a></h3>
<div class="highlight"><pre><span></span><code>Task weight: <span class="m">1</span>%

Use context: kubectl config use-context k8s-c1-H

There are various Pods <span class="k">in</span> all namespaces. Write a <span class="nb">command</span> into /opt/course/5/find_pods.sh which lists all Pods sorted by their AGE <span class="o">(</span>metadata.creationTimestamp<span class="o">)</span>.

Write a second <span class="nb">command</span> into /opt/course/5/find_pods_uid.sh which lists all Pods sorted by field metadata.uid. Use kubectl sorting <span class="k">for</span> both commands.
</code></pre></div>
<h3 id="7_1">试题7<a class="headerlink" href="#7_1" title="Permanent link">¶</a></h3>
<div class="highlight"><pre><span></span><code><span class="n">Task</span><span class="w"> </span><span class="n">weight</span><span class="o">:</span><span class="w"> </span><span class="mi">8</span><span class="o">%</span><span class="w"></span>

<span class="n">Use</span><span class="w"> </span><span class="n">context</span><span class="o">:</span><span class="w"> </span><span class="n">kubectl</span><span class="w"> </span><span class="n">config</span><span class="w"> </span><span class="n">use</span><span class="o">-</span><span class="n">context</span><span class="w"> </span><span class="n">k8s</span><span class="o">-</span><span class="n">c1</span><span class="o">-</span><span class="n">H</span><span class="w"></span>

<span class="n">Create</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">PersistentVolume</span><span class="w"> </span><span class="n">named</span><span class="w"> </span><span class="n">safari</span><span class="o">-</span><span class="n">pv</span><span class="p">.</span><span class="w"> </span><span class="n">It</span><span class="w"> </span><span class="n">should</span><span class="w"> </span><span class="n">have</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">capacity</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="mi">2</span><span class="n">Gi</span><span class="p">,</span><span class="w"> </span><span class="n">accessMode</span><span class="w"> </span><span class="n">ReadWriteOnce</span><span class="p">,</span><span class="w"> </span><span class="n">hostPath</span><span class="w"> </span><span class="o">/</span><span class="n">Volumes</span><span class="o">/</span><span class="n">Data</span><span class="w"> </span><span class="n">and</span><span class="w"> </span><span class="n">no</span><span class="w"> </span><span class="n">storageClassName</span><span class="w"> </span><span class="n">defined</span><span class="p">.</span><span class="w"></span>

<span class="n">Next</span><span class="w"> </span><span class="n">create</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">PersistentVolumeClaim</span><span class="w"> </span><span class="n">in</span><span class="w"> </span><span class="n">Namespace</span><span class="w"> </span><span class="n">project</span><span class="o">-</span><span class="n">tiger</span><span class="w"> </span><span class="n">named</span><span class="w"> </span><span class="n">safari</span><span class="o">-</span><span class="n">pvc</span><span class="w"> </span><span class="p">.</span><span class="w"> </span><span class="n">It</span><span class="w"> </span><span class="n">should</span><span class="w"> </span><span class="n">request</span><span class="w"> </span><span class="mi">2</span><span class="n">Gi</span><span class="w"> </span><span class="n">storage</span><span class="p">,</span><span class="w"> </span><span class="n">accessMode</span><span class="w"> </span><span class="n">ReadWriteOnce</span><span class="w"> </span><span class="n">and</span><span class="w"> </span><span class="n">should</span><span class="w"> </span><span class="n">not</span><span class="w"> </span><span class="n">define</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">storageClassName</span><span class="p">.</span><span class="w"> </span><span class="n">The</span><span class="w"> </span><span class="n">PVC</span><span class="w"> </span><span class="n">should</span><span class="w"> </span><span class="n">bound</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">PV</span><span class="w"> </span><span class="n">correctly</span><span class="p">.</span><span class="w"></span>

<span class="n">Finally</span><span class="w"> </span><span class="n">create</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Deployment</span><span class="w"> </span><span class="n">safari</span><span class="w"> </span><span class="n">in</span><span class="w"> </span><span class="n">Namespace</span><span class="w"> </span><span class="n">project</span><span class="o">-</span><span class="n">tiger</span><span class="w"> </span><span class="n">which</span><span class="w"> </span><span class="n">mounts</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">volume</span><span class="w"> </span><span class="n">at</span><span class="w"> </span><span class="o">/</span><span class="n">tmp</span><span class="o">/</span><span class="n">safari</span><span class="o">-</span><span class="n">data</span><span class="p">.</span><span class="w"> </span><span class="n">The</span><span class="w"> </span><span class="n">Pods</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">Deployment</span><span class="w"> </span><span class="n">should</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">image</span><span class="w"> </span><span class="n">httpd</span><span class="o">:</span><span class="mf">2.4.41</span><span class="o">-</span><span class="n">alpine</span><span class="p">.</span><span class="w"></span>
</code></pre></div>
<h3 id="8_1">试题8<a class="headerlink" href="#8_1" title="Permanent link">¶</a></h3>
<div class="highlight"><pre><span></span><code><span class="n">Task</span><span class="w"> </span><span class="n">weight</span>: <span class="mi">2</span><span class="o">%</span><span class="w"></span>

<span class="n">Use</span><span class="w"> </span><span class="n">context</span>: <span class="nc">kubectl</span><span class="w"> </span><span class="n">config</span><span class="w"> </span><span class="k">use</span><span class="o">-</span><span class="n">context</span><span class="w"> </span><span class="n">k8s</span><span class="o">-</span><span class="n">c1</span><span class="o">-</span><span class="n">H</span><span class="w"></span>

<span class="n">Ssh</span><span class="w"> </span><span class="n">into</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">master</span><span class="w"> </span><span class="n">node</span><span class="w"> </span><span class="n">with</span><span class="w"> </span><span class="n">ssh</span><span class="w"> </span><span class="n">cluster1</span><span class="o">-</span><span class="n">master1</span><span class="p">.</span><span class="w"> </span><span class="n">Check</span><span class="w"> </span><span class="n">how</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">master</span><span class="w"> </span><span class="n">components</span><span class="w"> </span><span class="n">kubelet</span><span class="p">,</span><span class="w"> </span><span class="n">kube</span><span class="o">-</span><span class="n">apiserver</span><span class="p">,</span><span class="w"> </span><span class="n">kube</span><span class="o">-</span><span class="n">scheduler</span><span class="p">,</span><span class="w"> </span><span class="n">kube</span><span class="o">-</span><span class="n">controller</span><span class="o">-</span><span class="n">manager</span><span class="w"> </span><span class="n">and</span><span class="w"> </span><span class="n">etcd</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">started</span><span class="o">/</span><span class="n">installed</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">master</span><span class="w"> </span><span class="n">node</span><span class="p">.</span><span class="w"> </span><span class="n">Also</span><span class="w"> </span><span class="n">find</span><span class="w"> </span><span class="n">out</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">name</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">DNS</span><span class="w"> </span><span class="n">application</span><span class="w"> </span><span class="n">and</span><span class="w"> </span><span class="n">how</span><span class="w"> </span><span class="n">it</span><span class="o">'</span><span class="na">s</span><span class="w"> </span><span class="n">started</span><span class="o">/</span><span class="n">installed</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">master</span><span class="w"> </span><span class="n">node</span><span class="p">.</span><span class="w"></span>

<span class="n">Write</span><span class="w"> </span><span class="n">your</span><span class="w"> </span><span class="n">findings</span><span class="w"> </span><span class="n">into</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="o">/</span><span class="n">opt</span><span class="o">/</span><span class="n">course</span><span class="o">/</span><span class="mi">8</span><span class="o">/</span><span class="n">master</span><span class="o">-</span><span class="n">components</span><span class="p">.</span><span class="n">txt</span><span class="p">.</span><span class="w"> </span><span class="n">The</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="n">should</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">structured</span><span class="w"> </span><span class="n">like</span>:

#<span class="w"> </span><span class="o">/</span><span class="n">opt</span><span class="o">/</span><span class="n">course</span><span class="o">/</span><span class="mi">8</span><span class="o">/</span><span class="n">master</span><span class="o">-</span><span class="n">components</span><span class="p">.</span><span class="n">txt</span><span class="w"></span>
<span class="n">kubelet</span>: <span class="p">[</span><span class="n">TYPE</span><span class="p">]</span><span class="w"></span>
<span class="n">kube</span><span class="o">-</span><span class="n">apiserver</span>: <span class="p">[</span><span class="n">TYPE</span><span class="p">]</span><span class="w"></span>
<span class="n">kube</span><span class="o">-</span><span class="n">scheduler</span>: <span class="p">[</span><span class="n">TYPE</span><span class="p">]</span><span class="w"></span>
<span class="n">kube</span><span class="o">-</span><span class="n">controller</span><span class="o">-</span><span class="n">manager</span>: <span class="p">[</span><span class="n">TYPE</span><span class="p">]</span><span class="w"></span>
<span class="n">etcd</span>: <span class="p">[</span><span class="n">TYPE</span><span class="p">]</span><span class="w"></span>
<span class="n">dns</span>: <span class="p">[</span><span class="n">TYPE</span><span class="p">]</span><span class="w"> </span><span class="p">[</span><span class="n">NAME</span><span class="p">]</span><span class="w"></span>
<span class="n">Choices</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="p">[</span><span class="n">TYPE</span><span class="p">]</span><span class="w"> </span><span class="n">are</span>: <span class="nc">not</span><span class="o">-</span><span class="n">installed</span><span class="p">,</span><span class="w"> </span><span class="n">process</span><span class="p">,</span><span class="w"> </span><span class="k">static</span><span class="o">-</span><span class="n">pod</span><span class="p">,</span><span class="w"> </span><span class="n">pod</span><span class="w"></span>
</code></pre></div>
<h3 id="9_1">试题9<a class="headerlink" href="#9_1" title="Permanent link">¶</a></h3>
<div class="highlight"><pre><span></span><code><span class="n">Task</span><span class="w"> </span><span class="n">weight</span>: <span class="mi">5</span><span class="o">%</span><span class="w"></span>

<span class="n">Use</span><span class="w"> </span><span class="n">context</span>: <span class="nc">kubectl</span><span class="w"> </span><span class="n">config</span><span class="w"> </span><span class="k">use</span><span class="o">-</span><span class="n">context</span><span class="w"> </span><span class="n">k8s</span><span class="o">-</span><span class="n">c2</span><span class="o">-</span><span class="n">AC</span><span class="w"></span>

<span class="n">Ssh</span><span class="w"> </span><span class="n">into</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">master</span><span class="w"> </span><span class="n">node</span><span class="w"> </span><span class="n">with</span><span class="w"> </span><span class="n">ssh</span><span class="w"> </span><span class="n">cluster2</span><span class="o">-</span><span class="n">master1</span><span class="p">.</span><span class="w"> </span><span class="n">Temporarily</span><span class="w"> </span><span class="n">stop</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">kube</span><span class="o">-</span><span class="n">scheduler</span><span class="p">,</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="n">means</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">way</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">you</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">start</span><span class="w"> </span><span class="n">it</span><span class="w"> </span><span class="n">again</span><span class="w"> </span><span class="n">afterwards</span><span class="p">.</span><span class="w"></span>

<span class="n">Create</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">single</span><span class="w"> </span><span class="n">Pod</span><span class="w"> </span><span class="n">named</span><span class="w"> </span><span class="n">manual</span><span class="o">-</span><span class="n">schedule</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">image</span><span class="w"> </span><span class="n">httpd</span>:<span class="mf">2.4</span><span class="o">-</span><span class="n">alpine</span><span class="p">,</span><span class="w"> </span><span class="n">confirm</span><span class="w"> </span><span class="n">its</span><span class="w"> </span><span class="n">started</span><span class="w"> </span><span class="n">but</span><span class="w"> </span><span class="n">not</span><span class="w"> </span><span class="n">scheduled</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="n">any</span><span class="w"> </span><span class="n">node</span><span class="p">.</span><span class="w"></span>

<span class="n">Now</span><span class="w"> </span><span class="n">you</span><span class="o">'</span><span class="na">re</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">scheduler</span><span class="w"> </span><span class="n">and</span><span class="w"> </span><span class="n">have</span><span class="w"> </span><span class="n">all</span><span class="w"> </span><span class="n">its</span><span class="w"> </span><span class="n">power</span><span class="p">,</span><span class="w"> </span><span class="n">manually</span><span class="w"> </span><span class="n">schedule</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">Pod</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="n">node</span><span class="w"> </span><span class="n">cluster2</span><span class="o">-</span><span class="n">master1</span><span class="p">.</span><span class="w"> </span><span class="n">Make</span><span class="w"> </span><span class="n">sure</span><span class="w"> </span><span class="n">it</span><span class="o">'</span><span class="na">s</span><span class="w"> </span><span class="n">running</span><span class="p">.</span><span class="w"></span>

<span class="n">Start</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">kube</span><span class="o">-</span><span class="n">scheduler</span><span class="w"> </span><span class="n">again</span><span class="w"> </span><span class="n">and</span><span class="w"> </span><span class="n">confirm</span><span class="w"> </span><span class="n">its</span><span class="w"> </span><span class="n">running</span><span class="w"> </span><span class="n">correctly</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="n">creating</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">second</span><span class="w"> </span><span class="n">Pod</span><span class="w"> </span><span class="n">named</span><span class="w"> </span><span class="n">manual</span><span class="o">-</span><span class="n">schedule2</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">image</span><span class="w"> </span><span class="n">httpd</span>:<span class="mf">2.4</span><span class="o">-</span><span class="n">alpine</span><span class="w"> </span><span class="n">and</span><span class="w"> </span><span class="n">check</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">it</span><span class="o">'</span><span class="na">s</span><span class="w"> </span><span class="n">running</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="n">cluster2</span><span class="o">-</span><span class="n">worker1</span><span class="p">.</span><span class="w"></span>
</code></pre></div>
<h3 id="10_1">试题10<a class="headerlink" href="#10_1" title="Permanent link">¶</a></h3>
<div class="highlight"><pre><span></span><code>Use context: kubectl config use-context k8s-c1-H

Create a new ServiceAccount processor <span class="k">in</span> Namespace project-hamster. Create a Role and RoleBinding, both named processor as well. These should allow the new SA to only create Secrets and ConfigMaps <span class="k">in</span> that Namespace.
</code></pre></div>
<h3 id="11_1">试题11<a class="headerlink" href="#11_1" title="Permanent link">¶</a></h3>
<div class="highlight"><pre><span></span><code><span class="n">Use</span><span class="w"> </span><span class="nl">context:</span><span class="w"> </span><span class="n">kubectl</span><span class="w"> </span><span class="n">config</span><span class="w"> </span><span class="n">use</span><span class="o">-</span><span class="n">context</span><span class="w"> </span><span class="n">k8s</span><span class="o">-</span><span class="n">c1</span><span class="o">-</span><span class="n">H</span><span class="w"></span>

<span class="n">Use</span><span class="w"> </span><span class="n">Namespace</span><span class="w"> </span><span class="n">project</span><span class="o">-</span><span class="n">tiger</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">following</span><span class="p">.</span><span class="w"> </span><span class="n">Create</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">DaemonSet</span><span class="w"> </span><span class="n">named</span><span class="w"> </span><span class="n">ds</span><span class="o">-</span><span class="n">important</span><span class="w"> </span><span class="kd">with</span><span class="w"> </span><span class="n">image</span><span class="w"> </span><span class="nl">httpd:</span><span class="m">2.4</span><span class="o">-</span><span class="n">alpine</span><span class="w"> </span><span class="n">and</span><span class="w"> </span><span class="n">labels</span><span class="w"> </span><span class="n">id</span><span class="o">=</span><span class="n">ds</span><span class="o">-</span><span class="n">important</span><span class="w"> </span><span class="n">and</span><span class="w"> </span><span class="n">uuid</span><span class="o">=</span><span class="m">18426</span><span class="n">a0b</span><span class="o">-</span><span class="m">5</span><span class="n">f59</span><span class="o">-</span><span class="m">4e10</span><span class="o">-</span><span class="m">923</span><span class="n">f</span><span class="o">-</span><span class="n">c0e078e82462</span><span class="p">.</span><span class="w"> </span><span class="n">The</span><span class="w"> </span><span class="n">Pods</span><span class="w"> </span><span class="n">it</span><span class="w"> </span><span class="n">creates</span><span class="w"> </span><span class="n">should</span><span class="w"> </span><span class="n">request</span><span class="w"> </span><span class="m">10</span><span class="w"> </span><span class="n">millicore</span><span class="w"> </span><span class="n">cpu</span><span class="w"> </span><span class="n">and</span><span class="w"> </span><span class="m">10</span><span class="w"> </span><span class="n">megabytes</span><span class="w"> </span><span class="n">memory</span><span class="p">.</span><span class="w"> </span><span class="n">The</span><span class="w"> </span><span class="n">Pods</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">DaemonSet</span><span class="w"> </span><span class="n">should</span><span class="w"> </span><span class="n">run</span><span class="w"> </span><span class="kd">on</span><span class="w"> </span><span class="n">all</span><span class="w"> </span><span class="n">nodes</span><span class="p">.</span><span class="w"></span>
</code></pre></div>
<h3 id="12_1">试题12<a class="headerlink" href="#12_1" title="Permanent link">¶</a></h3>
<div class="highlight"><pre><span></span><code><span class="n">Use</span><span class="w"> </span><span class="n">context</span><span class="o">:</span><span class="w"> </span><span class="n">kubectl</span><span class="w"> </span><span class="n">config</span><span class="w"> </span><span class="n">use</span><span class="o">-</span><span class="n">context</span><span class="w"> </span><span class="n">k8s</span><span class="o">-</span><span class="n">c1</span><span class="o">-</span><span class="n">H</span><span class="w"></span>

<span class="n">Use</span><span class="w"> </span><span class="n">Namespace</span><span class="w"> </span><span class="n">project</span><span class="o">-</span><span class="n">tiger</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">following</span><span class="p">.</span><span class="w"> </span><span class="n">Create</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">Deployment</span><span class="w"> </span><span class="n">named</span><span class="w"> </span><span class="n">deploy</span><span class="o">-</span><span class="n">important</span><span class="w"> </span><span class="n">with</span><span class="w"> </span><span class="n">label</span><span class="w"> </span><span class="n">id</span><span class="o">=</span><span class="n">very</span><span class="o">-</span><span class="n">important</span><span class="w"> </span><span class="p">(</span><span class="n">the</span><span class="w"> </span><span class="n">pods</span><span class="w"> </span><span class="n">should</span><span class="w"> </span><span class="n">also</span><span class="w"> </span><span class="n">have</span><span class="w"> </span><span class="k">this</span><span class="w"> </span><span class="n">label</span><span class="p">)</span><span class="w"> </span><span class="n">and</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="n">replicas</span><span class="p">.</span><span class="w"> </span><span class="n">It</span><span class="w"> </span><span class="n">should</span><span class="w"> </span><span class="n">contain</span><span class="w"> </span><span class="n">two</span><span class="w"> </span><span class="n">containers</span><span class="p">,</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">first</span><span class="w"> </span><span class="n">named</span><span class="w"> </span><span class="n">container1</span><span class="w"> </span><span class="n">with</span><span class="w"> </span><span class="n">image</span><span class="w"> </span><span class="n">nginx</span><span class="o">:</span><span class="mf">1.17.6</span><span class="o">-</span><span class="n">alpine</span><span class="w"> </span><span class="n">and</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">second</span><span class="w"> </span><span class="n">one</span><span class="w"> </span><span class="n">named</span><span class="w"> </span><span class="n">container2</span><span class="w"> </span><span class="n">with</span><span class="w"> </span><span class="n">image</span><span class="w"> </span><span class="n">kubernetes</span><span class="o">/</span><span class="n">pause</span><span class="p">.</span><span class="w"></span>

<span class="n">There</span><span class="w"> </span><span class="n">should</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">only</span><span class="w"> </span><span class="n">ever</span><span class="w"> </span><span class="n">one</span><span class="w"> </span><span class="n">Pod</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">Deployment</span><span class="w"> </span><span class="n">running</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="n">one</span><span class="w"> </span><span class="n">worker</span><span class="w"> </span><span class="n">node</span><span class="p">.</span><span class="w"> </span><span class="n">We</span><span class="w"> </span><span class="n">have</span><span class="w"> </span><span class="n">two</span><span class="w"> </span><span class="n">worker</span><span class="w"> </span><span class="n">nodes</span><span class="o">:</span><span class="w"> </span><span class="n">cluster1</span><span class="o">-</span><span class="n">worker1</span><span class="w"> </span><span class="n">and</span><span class="w"> </span><span class="n">cluster1</span><span class="o">-</span><span class="n">worker2</span><span class="p">.</span><span class="w"> </span><span class="n">Because</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">Deployment</span><span class="w"> </span><span class="n">has</span><span class="w"> </span><span class="n">three</span><span class="w"> </span><span class="n">replicas</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">result</span><span class="w"> </span><span class="n">should</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="n">both</span><span class="w"> </span><span class="n">nodes</span><span class="w"> </span><span class="n">one</span><span class="w"> </span><span class="n">Pod</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">running</span><span class="p">.</span><span class="w"> </span><span class="n">The</span><span class="w"> </span><span class="n">third</span><span class="w"> </span><span class="n">Pod</span><span class="w"> </span><span class="n">won</span><span class="err">'</span><span class="n">t</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">scheduled</span><span class="p">,</span><span class="w"> </span><span class="n">unless</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">worker</span><span class="w"> </span><span class="n">node</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">added</span><span class="p">.</span><span class="w"></span>

<span class="n">In</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">way</span><span class="w"> </span><span class="n">we</span><span class="w"> </span><span class="n">kind</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">simulate</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">behaviour</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">DaemonSet</span><span class="w"> </span><span class="n">here</span><span class="p">,</span><span class="w"> </span><span class="n">but</span><span class="w"> </span><span class="k">using</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">Deployment</span><span class="w"> </span><span class="n">and</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">fixed</span><span class="w"> </span><span class="n">number</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">replicas</span><span class="p">.</span><span class="w"></span>
</code></pre></div>
<h3 id="13_1">试题13<a class="headerlink" href="#13_1" title="Permanent link">¶</a></h3>
<div class="highlight"><pre><span></span><code><span class="n">Create</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">Pod</span><span class="w"> </span><span class="n">named</span><span class="w"> </span><span class="n">multi</span><span class="o">-</span><span class="n">container</span><span class="o">-</span><span class="n">playground</span><span class="w"> </span><span class="n">in</span><span class="w"> </span><span class="n">Namespace</span><span class="w"> </span><span class="k">default</span><span class="w"> </span><span class="n">with</span><span class="w"> </span><span class="n">three</span><span class="w"> </span><span class="n">containers</span><span class="p">,</span><span class="w"> </span><span class="n">named</span><span class="w"> </span><span class="n">c1</span><span class="p">,</span><span class="w"> </span><span class="n">c2</span><span class="w"> </span><span class="n">and</span><span class="w"> </span><span class="n">c3</span><span class="p">.</span><span class="w"> </span><span class="n">There</span><span class="w"> </span><span class="n">should</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">volume</span><span class="w"> </span><span class="n">attached</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">Pod</span><span class="w"> </span><span class="n">and</span><span class="w"> </span><span class="n">mounted</span><span class="w"> </span><span class="n">into</span><span class="w"> </span><span class="n">every</span><span class="w"> </span><span class="n">container</span><span class="p">,</span><span class="w"> </span><span class="n">but</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">volume</span><span class="w"> </span><span class="n">shouldn</span><span class="err">'</span><span class="n">t</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">persisted</span><span class="w"> </span><span class="n">or</span><span class="w"> </span><span class="n">shared</span><span class="w"> </span><span class="n">with</span><span class="w"> </span><span class="n">other</span><span class="w"> </span><span class="n">Pods</span><span class="p">.</span><span class="w"></span>

<span class="n">Container</span><span class="w"> </span><span class="n">c1</span><span class="w"> </span><span class="n">should</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">image</span><span class="w"> </span><span class="n">nginx</span><span class="o">:</span><span class="mf">1.17.6</span><span class="o">-</span><span class="n">alpine</span><span class="w"> </span><span class="n">and</span><span class="w"> </span><span class="n">have</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">name</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">node</span><span class="w"> </span><span class="n">where</span><span class="w"> </span><span class="n">its</span><span class="w"> </span><span class="n">Pod</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">running</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="n">value</span><span class="w"> </span><span class="n">available</span><span class="w"> </span><span class="n">as</span><span class="w"> </span><span class="n">environment</span><span class="w"> </span><span class="n">variable</span><span class="w"> </span><span class="n">MY_NODE_NAME</span><span class="p">.</span><span class="w"></span>

<span class="n">Container</span><span class="w"> </span><span class="n">c2</span><span class="w"> </span><span class="n">should</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">image</span><span class="w"> </span><span class="n">busybox</span><span class="o">:</span><span class="mf">1.31.1</span><span class="w"> </span><span class="n">and</span><span class="w"> </span><span class="n">write</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">output</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">date</span><span class="w"> </span><span class="n">command</span><span class="w"> </span><span class="n">every</span><span class="w"> </span><span class="n">second</span><span class="w"> </span><span class="n">in</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">shared</span><span class="w"> </span><span class="n">volume</span><span class="w"> </span><span class="n">into</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="n">date</span><span class="p">.</span><span class="n">log</span><span class="p">.</span><span class="w"> </span><span class="n">You</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">use</span><span class="w"> </span><span class="k">while</span><span class="w"> </span><span class="nb">true</span><span class="p">;</span><span class="w"> </span><span class="k">do</span><span class="w"> </span><span class="n">date</span><span class="w"> </span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="o">/</span><span class="n">your</span><span class="o">/</span><span class="n">vol</span><span class="o">/</span><span class="n">path</span><span class="o">/</span><span class="n">date</span><span class="p">.</span><span class="n">log</span><span class="p">;</span><span class="w"> </span><span class="n">sleep</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span><span class="w"> </span><span class="n">done</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="w"></span>

<span class="n">Container</span><span class="w"> </span><span class="n">c3</span><span class="w"> </span><span class="n">should</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">image</span><span class="w"> </span><span class="n">busybox</span><span class="o">:</span><span class="mf">1.31.1</span><span class="w"> </span><span class="n">and</span><span class="w"> </span><span class="n">constantly</span><span class="w"> </span><span class="n">write</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">content</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="n">date</span><span class="p">.</span><span class="n">log</span><span class="w"> </span><span class="n">from</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">shared</span><span class="w"> </span><span class="n">volume</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">stdout</span><span class="p">.</span><span class="w"> </span><span class="n">You</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">use</span><span class="w"> </span><span class="n">tail</span><span class="w"> </span><span class="o">-</span><span class="n">f</span><span class="w"> </span><span class="o">/</span><span class="n">your</span><span class="o">/</span><span class="n">vol</span><span class="o">/</span><span class="n">path</span><span class="o">/</span><span class="n">date</span><span class="p">.</span><span class="n">log</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="w"></span>

<span class="n">Check</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">logs</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">container</span><span class="w"> </span><span class="n">c3</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">confirm</span><span class="w"> </span><span class="n">correct</span><span class="w"> </span><span class="n">setup</span><span class="p">.</span><span class="w"></span>
</code></pre></div>
<h3 id="14_1">试题14<a class="headerlink" href="#14_1" title="Permanent link">¶</a></h3>
<div class="highlight"><pre><span></span><code><span class="n">Use</span> <span class="n">context</span><span class="p">:</span> <span class="n">kubectl</span> <span class="n">config</span> <span class="n">use</span><span class="o">-</span><span class="n">context</span> <span class="n">k8s</span><span class="o">-</span><span class="n">c1</span><span class="o">-</span><span class="n">H</span>

<span class="n">You</span><span class="err">'</span><span class="n">re</span> <span class="n">ask</span> <span class="n">to</span> <span class="bp">find</span> <span class="n">out</span> <span class="n">following</span> <span class="n">information</span> <span class="n">about</span> <span class="n">the</span> <span class="n">cluster</span> <span class="n">k8s</span><span class="o">-</span><span class="n">c1</span><span class="o">-</span><span class="n">H</span><span class="p">:</span>

<span class="n">How</span> <span class="n">many</span> <span class="n">master</span> <span class="n">nodes</span> <span class="n">are</span> <span class="n">available</span><span class="p">?</span>
<span class="n">How</span> <span class="n">many</span> <span class="n">worker</span> <span class="n">nodes</span> <span class="n">are</span> <span class="n">available</span><span class="p">?</span>
<span class="n">What</span> <span class="k">is</span> <span class="n">the</span> <span class="n">Service</span> <span class="n">CIDR</span><span class="p">?</span>
<span class="n">Which</span> <span class="n">Networking</span> <span class="p">(</span><span class="n">or</span> <span class="n">CNI</span> <span class="n">Plugin</span><span class="p">)</span> <span class="k">is</span> <span class="n">configured</span> <span class="n">and</span> <span class="k">where</span> <span class="k">is</span> <span class="n">its</span> <span class="n">config</span> <span class="n">file</span><span class="p">?</span>
<span class="n">Which</span> <span class="bp">suffix</span> <span class="n">will</span> <span class="kd">static</span> <span class="n">pods</span> <span class="n">have</span> <span class="n">that</span> <span class="n">run</span> <span class="n">on</span> <span class="n">cluster1</span><span class="o">-</span><span class="n">worker1</span><span class="p">?</span>
<span class="n">Write</span> <span class="n">your</span> <span class="n">answers</span> <span class="n">into</span> <span class="n">file</span> <span class="o">/</span><span class="n">opt</span><span class="o">/</span><span class="n">course</span><span class="o">/</span><span class="mi">14</span><span class="o">/</span><span class="n">cluster</span><span class="o">-</span><span class="n">info</span><span class="p">,</span> <span class="n">structured</span> <span class="n">like</span> <span class="n">this</span><span class="p">:</span>

<span class="p">#</span> <span class="o">/</span><span class="n">opt</span><span class="o">/</span><span class="n">course</span><span class="o">/</span><span class="mi">14</span><span class="o">/</span><span class="n">cluster</span><span class="o">-</span><span class="n">info</span>
<span class="mi">1</span><span class="p">:</span> <span class="p">[</span><span class="n">ANSWER</span><span class="p">]</span>
<span class="mi">2</span><span class="p">:</span> <span class="p">[</span><span class="n">ANSWER</span><span class="p">]</span>
<span class="mi">3</span><span class="p">:</span> <span class="p">[</span><span class="n">ANSWER</span><span class="p">]</span>
<span class="mi">4</span><span class="p">:</span> <span class="p">[</span><span class="n">ANSWER</span><span class="p">]</span>
<span class="mi">5</span><span class="p">:</span> <span class="p">[</span><span class="n">ANSWER</span><span class="p">]</span>
</code></pre></div>
<h3 id="15_1">试题15<a class="headerlink" href="#15_1" title="Permanent link">¶</a></h3>
<div class="highlight"><pre><span></span><code>Use context: kubectl config use-context k8s-c2-AC

Write a <span class="nb">command</span> into /opt/course/15/cluster_events.sh which shows the latest events <span class="k">in</span> the whole cluster, ordered by time. Use kubectl <span class="k">for</span> it.

Now <span class="nb">kill</span> the kube-proxy Pod running on node cluster2-worker1 and write the events this caused into /opt/course/15/pod_kill.log.

Finally <span class="nb">kill</span> the containerd container of the kube-proxy Pod on node cluster2-worker1 and write the events into /opt/course/15/container_kill.log.

Do you notice differences <span class="k">in</span> the events both actions caused?
</code></pre></div>
<h3 id="16_1">试题16<a class="headerlink" href="#16_1" title="Permanent link">¶</a></h3>
<div class="highlight"><pre><span></span><code>Use context: kubectl config use-context k8s-c1-H

Create a new Namespace called cka-master.

Write the names of all namespaced Kubernetes resources (like Pod, Secret, ConfigMap...) into /opt/course/16/resources.txt.

Find the project-* Namespace with the highest number of Roles defined in it and write its name and amount of Roles into /opt/course/16/crowded-namespace.txt.
</code></pre></div>
<h3 id="17_1">试题17<a class="headerlink" href="#17_1" title="Permanent link">¶</a></h3>
<div class="highlight"><pre><span></span><code>Use context: kubectl config use-context k8s-c1-H

In Namespace project-tiger create a Pod named tigers-reunite of image httpd:2.4.41-alpine with labels <span class="nv">pod</span><span class="o">=</span>container and <span class="nv">container</span><span class="o">=</span>pod. Find out on which node the Pod is scheduled. Ssh into that node and find the containerd container belonging to that Pod.

Using <span class="nb">command</span> crictl:

Write the ID of the container and the info.runtimeType into /opt/course/17/pod-container.txt

Write the logs of the container into /opt/course/17/pod-container.log
</code></pre></div>
<h3 id="18_1">试题18<a class="headerlink" href="#18_1" title="Permanent link">¶</a></h3>
<div class="highlight"><pre><span></span><code>Use context: kubectl config use-context k8s-c3-CCC

There seems to be an issue with the kubelet not running on cluster3-worker1. Fix it and confirm that cluster3 has node cluster3-worker1 available <span class="k">in</span> Ready state afterwards. Schedule a Pod on cluster3-worker1.

Write the reason of the is issue into /opt/course/18/reason.txt.
</code></pre></div>
<h3 id="19_1">试题19<a class="headerlink" href="#19_1" title="Permanent link">¶</a></h3>
<div class="highlight"><pre><span></span><code><span class="n">this</span><span class="w"> </span><span class="n">task</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">only</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">solved</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">questions</span><span class="w"> </span><span class="mi">18</span><span class="w"> </span><span class="n">or</span><span class="w"> </span><span class="mi">20</span><span class="w"> </span><span class="n">have</span><span class="w"> </span><span class="n">been</span><span class="w"> </span><span class="n">successfully</span><span class="w"> </span><span class="n">implemented</span><span class="w"> </span><span class="n">and</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">k8s</span><span class="o">-</span><span class="n">c3</span><span class="o">-</span><span class="n">CCC</span><span class="w"> </span><span class="n">cluster</span><span class="w"> </span><span class="n">has</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">functioning</span><span class="w"> </span><span class="n">worker</span><span class="w"> </span><span class="n">node</span><span class="w"></span>

<span class="n">Use</span><span class="w"> </span><span class="n">context</span>: <span class="nc">kubectl</span><span class="w"> </span><span class="n">config</span><span class="w"> </span><span class="k">use</span><span class="o">-</span><span class="n">context</span><span class="w"> </span><span class="n">k8s</span><span class="o">-</span><span class="n">c3</span><span class="o">-</span><span class="n">CCC</span><span class="w"></span>

<span class="n">Do</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">following</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">Namespace</span><span class="w"> </span><span class="n">secret</span><span class="p">.</span><span class="w"> </span><span class="n">Create</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">Pod</span><span class="w"> </span><span class="n">named</span><span class="w"> </span><span class="n">secret</span><span class="o">-</span><span class="n">pod</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">image</span><span class="w"> </span><span class="n">busybox</span>:<span class="mf">1.31.1</span><span class="w"> </span><span class="n">which</span><span class="w"> </span><span class="n">should</span><span class="w"> </span><span class="n">keep</span><span class="w"> </span><span class="n">running</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">some</span><span class="w"> </span><span class="n">time</span><span class="p">,</span><span class="w"> </span><span class="n">it</span><span class="w"> </span><span class="n">should</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">able</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">run</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="n">master</span><span class="w"> </span><span class="n">nodes</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">well</span><span class="p">.</span><span class="w"></span>

<span class="n">There</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="n">existing</span><span class="w"> </span><span class="n">Secret</span><span class="w"> </span><span class="n">located</span><span class="w"> </span><span class="n">at</span><span class="w"> </span><span class="o">/</span><span class="n">opt</span><span class="o">/</span><span class="n">course</span><span class="o">/</span><span class="mi">19</span><span class="o">/</span><span class="n">secret1</span><span class="p">.</span><span class="n">yaml</span><span class="p">,</span><span class="w"> </span><span class="n">create</span><span class="w"> </span><span class="n">it</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">secret</span><span class="w"> </span><span class="n">Namespace</span><span class="w"> </span><span class="n">and</span><span class="w"> </span><span class="n">mount</span><span class="w"> </span><span class="n">it</span><span class="w"> </span><span class="n">readonly</span><span class="w"> </span><span class="n">into</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">Pod</span><span class="w"> </span><span class="n">at</span><span class="w"> </span><span class="o">/</span><span class="n">tmp</span><span class="o">/</span><span class="n">secret1</span><span class="p">.</span><span class="w"></span>

<span class="n">Create</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">Secret</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">Namespace</span><span class="w"> </span><span class="n">secret</span><span class="w"> </span><span class="n">called</span><span class="w"> </span><span class="n">secret2</span><span class="w"> </span><span class="n">which</span><span class="w"> </span><span class="n">should</span><span class="w"> </span><span class="n">contain</span><span class="w"> </span><span class="n">user</span><span class="o">=</span><span class="n">user1</span><span class="w"> </span><span class="n">and</span><span class="w"> </span><span class="n">pass</span><span class="o">=</span><span class="mf">1234.</span><span class="w"> </span><span class="n">These</span><span class="w"> </span><span class="n">entries</span><span class="w"> </span><span class="n">should</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">available</span><span class="w"> </span><span class="n">inside</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">Pod</span><span class="o">'</span><span class="na">s</span><span class="w"> </span><span class="n">container</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">environment</span><span class="w"> </span><span class="n">variables</span><span class="w"> </span><span class="n">APP_USER</span><span class="w"> </span><span class="n">and</span><span class="w"> </span><span class="n">APP_PASS</span><span class="p">.</span><span class="w"></span>

<span class="n">Confirm</span><span class="w"> </span><span class="n">everything</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">working</span><span class="p">.</span><span class="w"></span>
</code></pre></div>
<h3 id="20_1">试题20<a class="headerlink" href="#20_1" title="Permanent link">¶</a></h3>
<div class="highlight"><pre><span></span><code><span class="n">Your</span><span class="w"> </span><span class="n">coworker</span><span class="w"> </span><span class="n">said</span><span class="w"> </span><span class="n">node</span><span class="w"> </span><span class="n">cluster3</span><span class="o">-</span><span class="n">worker2</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">running</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="n">older</span><span class="w"> </span><span class="n">Kubernetes</span><span class="w"> </span><span class="n">version</span><span class="w"> </span><span class="n">and</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">not</span><span class="w"> </span><span class="n">even</span><span class="w"> </span><span class="n">part</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">cluster</span><span class="p">.</span><span class="w"> </span><span class="n">Update</span><span class="w"> </span><span class="n">kubectl</span><span class="w"> </span><span class="n">and</span><span class="w"> </span><span class="n">kubeadm</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">version</span><span class="w"> </span><span class="n">that</span><span class="err">'</span><span class="n">s</span><span class="w"> </span><span class="n">running</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="n">cluster3</span><span class="o">-</span><span class="n">master1</span><span class="p">.</span><span class="w"> </span><span class="n">Then</span><span class="w"> </span><span class="n">add</span><span class="w"> </span><span class="k">this</span><span class="w"> </span><span class="n">node</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">cluster</span><span class="p">,</span><span class="w"> </span><span class="n">you</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">use</span><span class="w"> </span><span class="n">kubeadm</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="w"></span>
</code></pre></div>
<h3 id="21_1">试题21<a class="headerlink" href="#21_1" title="Permanent link">¶</a></h3>
<div class="highlight"><pre><span></span><code>Use context: kubectl config use-context k8s-c3-CCC

Create a Static Pod named my-static-pod <span class="k">in</span> Namespace default on cluster3-master1. It should be of image nginx:1.16-alpine and have resource requests <span class="k">for</span> 10m CPU and 20Mi memory.

Then create a NodePort Service named static-pod-service which exposes that static Pod on port <span class="m">80</span> and check <span class="k">if</span> it has Endpoints and <span class="k">if</span> its reachable through the cluster3-master1 internal IP address. You can connect to the internal node IPs from your main terminal.
</code></pre></div>
<h3 id="22_1">试题22<a class="headerlink" href="#22_1" title="Permanent link">¶</a></h3>
<div class="highlight"><pre><span></span><code>Use context: kubectl config use-context k8s-c2-AC

Check how long the kube-apiserver server certificate is valid on cluster2-master1. Do this with openssl or cfssl. Write the exipiration date into /opt/course/22/expiration.

Also run the correct kubeadm <span class="nb">command</span> to list the expiration dates and confirm both methods show the same date.

Write the correct kubeadm <span class="nb">command</span> that would renew the apiserver server certificate into /opt/course/22/kubeadm-renew-certs.sh.
</code></pre></div>
<h3 id="23_1">试题23<a class="headerlink" href="#23_1" title="Permanent link">¶</a></h3>
<div class="highlight"><pre><span></span><code>Use context: kubectl config use-context k8s-c2-AC

Node cluster2-worker1 has been added to the cluster using kubeadm and TLS bootstrapping.

Find the <span class="s2">"Issuer"</span> and <span class="s2">"Extended Key Usage"</span> values of the cluster2-worker1:

kubelet client certificate, the one used <span class="k">for</span> outgoing connections to the kube-apiserver.
kubelet server certificate, the one used <span class="k">for</span> incoming connections from the kube-apiserver.
Write the information into file /opt/course/23/certificate-info.txt.

Compare the <span class="s2">"Issuer"</span> and <span class="s2">"Extended Key Usage"</span> fields of both certificates and make sense of these.
</code></pre></div>
<h3 id="24">试题24<a class="headerlink" href="#24" title="Permanent link">¶</a></h3>
<div class="highlight"><pre><span></span><code>Use context: kubectl config use-context k8s-c1-H

There was a security incident where an intruder was able to access the whole cluster from a single hacked backend Pod.

To prevent this create a NetworkPolicy called np-backend <span class="k">in</span> Namespace project-snake. It should allow the backend-* Pods only to:

connect to db1-* Pods on port <span class="m">1111</span>
connect to db2-* Pods on port <span class="m">2222</span>
Use the app label of Pods <span class="k">in</span> your policy.

After implementation, connections from backend-* Pods to vault-* Pods on port <span class="m">3333</span> should <span class="k">for</span> example no longer work.
</code></pre></div>
<h3 id="25">试题25<a class="headerlink" href="#25" title="Permanent link">¶</a></h3>
<div class="highlight"><pre><span></span><code><span class="n">Use</span><span class="w"> </span><span class="nl">context:</span><span class="w"> </span><span class="n">kubectl</span><span class="w"> </span><span class="n">config</span><span class="w"> </span><span class="n">use</span><span class="o">-</span><span class="n">context</span><span class="w"> </span><span class="n">k8s</span><span class="o">-</span><span class="n">c3</span><span class="o">-</span><span class="n">CCC</span><span class="w"></span>

<span class="n">Make</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">backup</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">etcd</span><span class="w"> </span><span class="n">running</span><span class="w"> </span><span class="kd">on</span><span class="w"> </span><span class="n">cluster3</span><span class="o">-</span><span class="n">master1</span><span class="w"> </span><span class="n">and</span><span class="w"> </span><span class="n">save</span><span class="w"> </span><span class="n">it</span><span class="w"> </span><span class="kd">on</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">master</span><span class="w"> </span><span class="n">node</span><span class="w"> </span><span class="n">at</span><span class="w"> </span><span class="o">/</span><span class="n">tmp</span><span class="o">/</span><span class="n">etcd</span><span class="o">-</span><span class="n">backup</span><span class="p">.</span><span class="n">db</span><span class="p">.</span><span class="w"></span>

<span class="n">Then</span><span class="w"> </span><span class="n">create</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">Pod</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">your</span><span class="w"> </span><span class="n">kind</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">cluster</span><span class="p">.</span><span class="w"></span>

<span class="n">Finally</span><span class="w"> </span><span class="n">restore</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">backup</span><span class="p">,</span><span class="w"> </span><span class="n">confirm</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">cluster</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">still</span><span class="w"> </span><span class="n">working</span><span class="w"> </span><span class="n">and</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">created</span><span class="w"> </span><span class="n">Pod</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">no</span><span class="w"> </span><span class="n">longer</span><span class="w"> </span><span class="kd">with</span><span class="w"> </span><span class="n">us</span><span class="p">.</span><span class="w"></span>
</code></pre></div>
<h3 id="26">试题26<a class="headerlink" href="#26" title="Permanent link">¶</a></h3>
<div class="highlight"><pre><span></span><code>Use context: kubectl config use-context k8s-c1-H

Check all available Pods <span class="k">in</span> the Namespace project-c13 and find the names of those that would probably be terminated first <span class="k">if</span> the Nodes run out of resources <span class="o">(</span>cpu or memory<span class="o">)</span> to schedule all Pods. Write the Pod names into /opt/course/e1/pods-not-stable.txt.
</code></pre></div>
<h3 id="27">试题27<a class="headerlink" href="#27" title="Permanent link">¶</a></h3>
<div class="highlight"><pre><span></span><code>Use context: kubectl config use-context k8s-c1-H

There is an existing ServiceAccount secret-reader <span class="k">in</span> Namespace project-hamster. Create a Pod of image curlimages/curl:7.65.3 named tmp-api-contact which uses this ServiceAccount. Make sure the container keeps running.

Exec into the Pod and use curl to access the Kubernetes Api of that cluster manually, listing all available secrets. You can ignore insecure https connection. Write the command<span class="o">(</span>s<span class="o">)</span> <span class="k">for</span> this into file /opt/course/e4/list-secrets.
</code></pre></div>
<h3 id="26_1">试题26<a class="headerlink" href="#26_1" title="Permanent link">¶</a></h3>
<div class="highlight"><pre><span></span><code><span class="n">Preview</span><span class="w"> </span><span class="n">Question</span><span class="w"> </span><span class="mi">1</span><span class="w"></span>
<span class="n">Use</span><span class="w"> </span><span class="n">context</span>: <span class="nc">kubectl</span><span class="w"> </span><span class="n">config</span><span class="w"> </span><span class="k">use</span><span class="o">-</span><span class="n">context</span><span class="w"> </span><span class="n">k8s</span><span class="o">-</span><span class="n">c2</span><span class="o">-</span><span class="n">AC</span><span class="w"></span>

<span class="n">The</span><span class="w"> </span><span class="n">cluster</span><span class="w"> </span><span class="n">admin</span><span class="w"> </span><span class="n">asked</span><span class="w"> </span><span class="n">you</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">find</span><span class="w"> </span><span class="n">out</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">following</span><span class="w"> </span><span class="n">information</span><span class="w"> </span><span class="n">about</span><span class="w"> </span><span class="n">etcd</span><span class="w"> </span><span class="n">running</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="n">cluster2</span><span class="o">-</span><span class="n">master1</span>:

<span class="nc">Server</span><span class="w"> </span><span class="n">private</span><span class="w"> </span><span class="n">key</span><span class="w"> </span><span class="n">location</span><span class="w"></span>
<span class="n">Server</span><span class="w"> </span><span class="n">certificate</span><span class="w"> </span><span class="n">expiration</span><span class="w"> </span><span class="n">date</span><span class="w"></span>
<span class="n">Is</span><span class="w"> </span><span class="n">client</span><span class="w"> </span><span class="n">certificate</span><span class="w"> </span><span class="n">authentication</span><span class="w"> </span><span class="n">endabled</span><span class="w"></span>
<span class="n">Write</span><span class="w"> </span><span class="n">these</span><span class="w"> </span><span class="n">information</span><span class="w"> </span><span class="n">into</span><span class="w"> </span><span class="o">/</span><span class="n">opt</span><span class="o">/</span><span class="n">course</span><span class="o">/</span><span class="n">p1</span><span class="o">/</span><span class="n">etcd</span><span class="o">-</span><span class="n">info</span><span class="p">.</span><span class="n">txt</span><span class="w"></span>

<span class="n">Finally</span><span class="w"> </span><span class="n">you</span><span class="o">'</span><span class="na">re</span><span class="w"> </span><span class="n">asked</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">save</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="n">etcd</span><span class="w"> </span><span class="n">snapshot</span><span class="w"> </span><span class="n">at</span><span class="w"> </span><span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">etcd</span><span class="o">-</span><span class="n">snapshot</span><span class="p">.</span><span class="n">db</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="n">cluster2</span><span class="o">-</span><span class="n">master1</span><span class="w"> </span><span class="n">and</span><span class="w"> </span><span class="n">display</span><span class="w"> </span><span class="n">its</span><span class="w"> </span><span class="n">status</span><span class="p">.</span><span class="w"></span>
</code></pre></div>
<h3 id="27_1">试题27<a class="headerlink" href="#27_1" title="Permanent link">¶</a></h3>
<div class="highlight"><pre><span></span><code><span class="n">Preview</span> <span class="n">Question</span> <span class="mi">2</span>
<span class="n">Use</span> <span class="n">context</span><span class="p">:</span> <span class="n">kubectl</span> <span class="n">config</span> <span class="n">use</span><span class="o">-</span><span class="n">context</span> <span class="n">k8s</span><span class="o">-</span><span class="n">c1</span><span class="o">-</span><span class="n">H</span>

<span class="n">You</span><span class="s1">'re asked to confirm that kube-proxy is running correctly on all nodes. For this perform the following in Namespace project-hamster:</span>

<span class="n">Create</span> <span class="n">a</span> <span class="n">new</span> <span class="n">Pod</span> <span class="n">named</span> <span class="n">p2</span><span class="o">-</span><span class="n">pod</span> <span class="k">with</span> <span class="n">two</span> <span class="n">containers</span><span class="p">,</span> <span class="n">one</span> <span class="n">of</span> <span class="n">image</span> <span class="n">nginx</span><span class="p">:</span><span class="mf">1.21.3</span><span class="o">-</span><span class="n">alpine</span> <span class="ow">and</span> <span class="n">one</span> <span class="n">of</span> <span class="n">image</span> <span class="n">busybox</span><span class="p">:</span><span class="mf">1.31</span><span class="o">.</span> <span class="n">Make</span> <span class="n">sure</span> <span class="n">the</span> <span class="n">busybox</span> <span class="n">container</span> <span class="n">keeps</span> <span class="n">running</span> <span class="k">for</span> <span class="n">some</span> <span class="n">time</span><span class="o">.</span>

<span class="n">Create</span> <span class="n">a</span> <span class="n">new</span> <span class="n">Service</span> <span class="n">named</span> <span class="n">p2</span><span class="o">-</span><span class="n">service</span> <span class="n">which</span> <span class="n">exposes</span> <span class="n">that</span> <span class="n">Pod</span> <span class="n">internally</span> <span class="ow">in</span> <span class="n">the</span> <span class="n">cluster</span> <span class="n">on</span> <span class="n">port</span> <span class="mi">3000</span><span class="o">-&gt;</span><span class="mf">80.</span>

<span class="n">Find</span> <span class="n">the</span> <span class="n">kube</span><span class="o">-</span><span class="n">proxy</span> <span class="n">container</span> <span class="n">on</span> <span class="nb">all</span> <span class="n">nodes</span> <span class="n">cluster1</span><span class="o">-</span><span class="n">master1</span><span class="p">,</span> <span class="n">cluster1</span><span class="o">-</span><span class="n">worker1</span> <span class="ow">and</span> <span class="n">cluster1</span><span class="o">-</span><span class="n">worker2</span> <span class="ow">and</span> <span class="n">make</span> <span class="n">sure</span> <span class="n">that</span> <span class="n">it</span><span class="s1">'s using iptables. Use command crictl for this.</span>

<span class="n">Write</span> <span class="n">the</span> <span class="n">iptables</span> <span class="n">rules</span> <span class="n">of</span> <span class="nb">all</span> <span class="n">nodes</span> <span class="n">belonging</span> <span class="n">the</span> <span class="n">created</span> <span class="n">Service</span> <span class="n">p2</span><span class="o">-</span><span class="n">service</span> <span class="n">into</span> <span class="n">file</span> <span class="o">/</span><span class="n">opt</span><span class="o">/</span><span class="n">course</span><span class="o">/</span><span class="n">p2</span><span class="o">/</span><span class="n">iptables</span><span class="o">.</span><span class="n">txt</span><span class="o">.</span>

<span class="n">Finally</span> <span class="n">delete</span> <span class="n">the</span> <span class="n">Service</span> <span class="ow">and</span> <span class="n">confirm</span> <span class="n">that</span> <span class="n">the</span> <span class="n">iptables</span> <span class="n">rules</span> <span class="n">are</span> <span class="n">gone</span> <span class="kn">from</span> <span class="nn">all</span> <span class="n">nodes</span><span class="o">.</span>
</code></pre></div>
<h3 id="26_2">试题26<a class="headerlink" href="#26_2" title="Permanent link">¶</a></h3>
<div class="highlight"><pre><span></span><code>Preview Question <span class="m">3</span>
Use context: kubectl config use-context k8s-c2-AC

Create a Pod named check-ip <span class="k">in</span> Namespace default using image httpd:2.4.41-alpine. Expose it on port <span class="m">80</span> as a ClusterIP Service named check-ip-service. Remember/output the IP of that Service.

Change the Service CIDR to <span class="m">11</span>.96.0.0/12 <span class="k">for</span> the cluster.

Then create a second Service named check-ip-service2 pointing to the same Pod to check <span class="k">if</span> your settings did take effect. Finally check <span class="k">if</span> the IP of the first Service has changed.
</code></pre></div>
<h2 id="cka_1">CKA真命题<a class="headerlink" href="#cka_1" title="Permanent link">¶</a></h2>
<ul>
<li>注意点</li>
<li>如果遇到etcd还原的后和升级k8s最好这题最后在做吧</li>
<li>升级k8s也最后在做吧，避免整个k8s异常，导致其他的题目无法进行了，我第一次考挂了，导致后面的题目无法做。</li>
<li>
<p>参考文章: https://blog.csdn.net/u011127242/category_10823035.html?spm=1001.2014.3001.5482</p>
</li>
<li>
<p>题目1 需要重点记录</p>
</li>
</ul>
<div class="highlight"><pre><span></span><code>创建名称 deployment-clusterrole 的 ClusterRole
该角色具备创建 Deployment、Statefulset、Daemonset 的权限
在命名空间 app-team1 中创建名称为 cicd-token 的 ServiceAccount
绑定 ClusterRole 到 ServiceAccount，且限定命名空间为 app-team1


kubectl create ns app-team1

kubectl create serviceaccount cicd-token -n app-team1

kubectl create clusterrole deployment-clusterrole --verb=create --resource=deployment,statefulset,daemonset

 kubectl -n app-team1 create rolebinding cicd-clusterrole   --clusterrole=deployment-clusterrole --serviceaccount=app-team1:cicd-token
</code></pre></div>
<ul>
<li>题目2 需要重点记录</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="n">设置</span><span class="w"> </span><span class="n">ek8s</span><span class="o">-</span><span class="n">node</span><span class="mi">-1</span><span class="w"> </span><span class="n">节点为不可用</span><span class="w"></span>
<span class="n">重新调度该节点上的所有</span><span class="w"> </span><span class="n">pod</span><span class="w"></span>

<span class="n">kubectl</span><span class="w"> </span><span class="n">cordon</span><span class="w"> </span><span class="n">ek8s</span><span class="o">-</span><span class="n">node</span><span class="mi">-1</span><span class="w"></span>
<span class="n">kubectl</span><span class="w"> </span><span class="n">drain</span><span class="w"> </span><span class="n">ek8s</span><span class="o">-</span><span class="n">node</span><span class="mi">-1</span><span class="w"> </span><span class="o">--</span><span class="n">ignore</span><span class="o">-</span><span class="n">daemonsets</span><span class="w"> </span><span class="o">--</span><span class="k">delete</span><span class="o">-</span><span class="n">local</span><span class="o">-</span><span class="n">data</span><span class="w"> </span><span class="o">--</span><span class="n">force</span><span class="w"></span>
</code></pre></div>
<ul>
<li>题目3</li>
</ul>
<div class="highlight"><pre><span></span><code>升级 master 节点为1.20.1
升级前确保drain master 节点
不要升级worker node 、容器 manager、 etcd、 CNI插件、DNS 等内容

https://kubernetes.io/zh/docs/tasks/administer-cluster/kubeadm/kubeadm-upgrade/
kubectl get nodes
ssh mk8s-master-0
kubectl cordon mk8s-master-0
kubectl drain mk8s-master-0 --ignore-daemonsets
apt-mark unhold kubeadm kubectl kubelet 
apt-get update <span class="o">&amp;&amp;</span> apt-get install -y <span class="nv">kubeadm</span><span class="o">=</span><span class="m">1</span>.20.1-00 <span class="nv">kubelet</span><span class="o">=</span><span class="m">1</span>.20.1-00 <span class="nv">kubectl</span><span class="o">=</span><span class="m">1</span>.20.1-00
apt-mark hold kubeadm kubectl kubelet
kubeadm upgrade plan
kubeadm upgrade apply v1.20.1 --etcd-upgrade<span class="o">=</span><span class="nb">false</span>
// kubectl rollout undo deployment coredns -n kube-system ,有些大佬建议rollout coredns，笔者考试的时候没有rollover
kubectl uncordon mk8s-master-0
</code></pre></div>
<ul>
<li>题目4</li>
</ul>
<div class="highlight"><pre><span></span><code>备份 https://127.0.0.1:2379 上的 etcd 数据到 /var/lib/backup/etcd-snapshot.db
使用之前的文件 /data/backup/etcd-snapshot-previous.db 还原 etcd
使用指定的 ca.crt 、 etcd-client.crt 、etcd-client.key


备份etc,需要指定证书
<span class="nv">ETCDCTL_API</span><span class="o">=</span><span class="m">3</span> etcdctl --endpoints<span class="o">=</span>https://127.0.0.1:2379    --cacert<span class="o">=</span>/etc/kubernetes/pki/etcd/ca.crt  --cert<span class="o">=</span>/etc/kubernetes/pki/etcd/peer.crt   --key<span class="o">=</span>/etc/kubernetes/pki/etcd/peer.key  snapshot save   /var/lib/bacp/etcd-snapshot.db

验证etcd备份是否正确
<span class="nv">ETCDCTL_API</span><span class="o">=</span><span class="m">3</span> etcdctl --write-out<span class="o">=</span>table snapshot   status   etcd-snapshot.db   --cacert<span class="o">=</span>/etc/kubernetes/pki/etcd/ca.crt  --cert<span class="o">=</span>/etc/kubernetes/pki/etcd/peer.crt   --key<span class="o">=</span>/etc/kubernetes/pki/etcd/peer.key 


恢复ectd集群
<span class="nv">ETCDCTL_API</span><span class="o">=</span><span class="m">3</span> etcdctl --write-out<span class="o">=</span>table snapshot   restore    etcd-snapshot.db   --cacert<span class="o">=</span>/etc/kubernetes/pki/etcd/ca.crt  --cert<span class="o">=</span>/etc/kubernetes/pki/etcd/peer.crt   --key<span class="o">=</span>/etc/kubernetes/pki/etcd/peer.key   
</code></pre></div>
<ul>
<li>题目5 需要重点记录</li>
</ul>
<div class="highlight"><pre><span></span><code>拷贝 services-networking/network-policies 中的案例，删掉不必要的部分
设置网络策略所属的 ns 为 fubar，端口为 <span class="m">80</span>
设置 namespaceSelector 为源ns my-app 的labels

https://kubernetes.io/docs/concepts/services-networking/network-policies/
<span class="o">[</span>root@k8s-node1 ~<span class="o">]</span><span class="c1"># vim NetworkPolicy.yaml </span>

apiVersion: networking.k8s.io/v1
kind: NetworkPolicy
metadata:
  name: allow-port-from-namespace
  namespace: fubar
spec:
  podSelector:
    matchLabels: <span class="o">{}</span>
  policyTypes:
  - Ingress
  ingress:
  - from:
    - namespaceSelector:
        matchLabels:
          my-app-key: my-app-value
    - podSelector:
        matchLabels: <span class="o">{}</span>
    ports:
    - protocol: TCP
      port: <span class="m">80</span>
</code></pre></div>
<ul>
<li>题目6 &lt;需要重点注意点&gt;</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="err">重新配置已有的</span> <span class="n">deployment</span> <span class="n">front</span><span class="o">-</span><span class="k">end</span><span class="err">，添加一个名称为</span> <span class="n">http</span> <span class="err">的端口，暴露</span><span class="mi">80</span><span class="o">/</span><span class="no">TCP</span>
<span class="err">创建名称为</span> <span class="n">front</span><span class="o">-</span><span class="k">end</span><span class="o">-</span><span class="n">svc</span> <span class="err">的</span> <span class="n">service</span><span class="err">，暴露容器的</span> <span class="n">http</span> <span class="err">端口</span>
<span class="err">配置</span><span class="n">service</span> <span class="err">的类别为</span><span class="no">NodePort</span>

<span class="mi">1</span><span class="err">）</span><span class="n">edit</span> <span class="n">front</span><span class="o">-</span><span class="k">end</span> <span class="err">，在</span><span class="n">containers</span> <span class="err">中添加如下内容</span> 
<span class="n">kubectl</span> <span class="n">edit</span> <span class="n">deployment</span> <span class="n">front</span><span class="o">-</span><span class="k">end</span>
<span class="ss">ports</span><span class="p">:</span>
<span class="o">-</span> <span class="nb">name</span><span class="p">:</span> <span class="n">http</span>
  <span class="ss">protocol</span><span class="p">:</span> <span class="no">TCP</span>
  <span class="ss">containerPort</span><span class="p">:</span> <span class="mi">80</span>

<span class="ss">https</span><span class="p">:</span><span class="sr">//</span><span class="n">kubernetes</span><span class="o">.</span><span class="n">io</span><span class="o">/</span><span class="n">docs</span><span class="o">/</span><span class="n">reference</span><span class="o">/</span><span class="n">generated</span><span class="o">/</span><span class="n">kubectl</span><span class="o">/</span><span class="n">kubectl</span><span class="o">-</span><span class="n">commands</span><span class="c1">#expose 参考 kubectl expose deployment，然后在使用-h查看帮助信息。</span>
<span class="mi">2</span><span class="err">）</span><span class="o">[</span><span class="n">root</span><span class="vi">@k8s</span><span class="o">-</span><span class="n">node1</span> <span class="o">~]</span><span class="c1"># kubectl expose deployment  kual00612  --port=80 --target-port=80   --type=NodePort   --name=front-end-svc</span>
</code></pre></div>
<ul>
<li>题目7</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="err">创建一个新的</span><span class="w"> </span><span class="n">Ingress</span><span class="w"> </span><span class="err">资源，名称</span><span class="w"> </span><span class="n">ping</span><span class="err">，命名空间</span><span class="w"> </span><span class="n">ing</span><span class="o">-</span><span class="n">internal</span><span class="w"></span>
<span class="err">使用</span><span class="w"> </span><span class="o">/</span><span class="n">hello</span><span class="w"> </span><span class="err">路径暴露服务</span><span class="w"> </span><span class="n">hello</span><span class="w"> </span><span class="err">的</span><span class="w"> </span><span class="m">5678</span><span class="w"> </span><span class="err">端口</span><span class="w"></span>

<span class="n">https</span><span class="p">:</span><span class="c1">//kubernetes.io/docs/concepts/services-networking/ingress/</span><span class="w"></span>

<span class="o">[</span><span class="nd">root@</span><span class="n">k8s</span><span class="o">-</span><span class="n">node1</span><span class="w"> </span><span class="o">~]</span><span class="err">#</span><span class="w"> </span><span class="n">vim</span><span class="w"> </span><span class="n">ingress</span><span class="p">.</span><span class="na">yaml</span><span class="w"> </span>

<span class="n">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="n">networking</span><span class="p">.</span><span class="na">k8s</span><span class="p">.</span><span class="na">io</span><span class="o">/</span><span class="n">v1</span><span class="w"></span>
<span class="n">kind</span><span class="p">:</span><span class="w"> </span><span class="n">Ingress</span><span class="w"></span>
<span class="n">metadata</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="n">name</span><span class="p">:</span><span class="w"> </span><span class="n">ping</span><span class="w"></span>
<span class="w">  </span><span class="n">namespace</span><span class="p">:</span><span class="w"> </span><span class="n">ing</span><span class="o">-</span><span class="n">internal</span><span class="w"></span>
<span class="w">  </span><span class="n">annotations</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="n">nginx</span><span class="p">.</span><span class="na">ingress</span><span class="p">.</span><span class="na">kubernetes</span><span class="p">.</span><span class="na">io</span><span class="o">/</span><span class="n">rewrite</span><span class="o">-</span><span class="n">target</span><span class="p">:</span><span class="w"> </span><span class="o">/</span><span class="w"></span>
<span class="n">spec</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="n">rules</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="o">-</span><span class="w"> </span><span class="n">http</span><span class="p">:</span><span class="w"></span>
<span class="w">      </span><span class="n">paths</span><span class="p">:</span><span class="w"></span>
<span class="w">      </span><span class="o">-</span><span class="w"> </span><span class="n">path</span><span class="p">:</span><span class="w"> </span><span class="o">/</span><span class="n">hello</span><span class="w"></span>
<span class="w">        </span><span class="n">pathType</span><span class="p">:</span><span class="w"> </span><span class="n">Prefix</span><span class="w"></span>
<span class="w">        </span><span class="n">backend</span><span class="p">:</span><span class="w"></span>
<span class="w">          </span><span class="n">service</span><span class="p">:</span><span class="w"></span>
<span class="w">            </span><span class="n">name</span><span class="p">:</span><span class="w"> </span><span class="n">test</span><span class="w"></span>
<span class="w">            </span><span class="n">port</span><span class="p">:</span><span class="w"></span>
<span class="w">              </span><span class="n">number</span><span class="p">:</span><span class="w"> </span><span class="m">5678</span><span class="w"></span>
</code></pre></div>
<ul>
<li>题目8</li>
</ul>
<div class="highlight"><pre><span></span><code>扩容 deployment guestbook 为 6个pod

kubectl scale deployment --replicas<span class="o">=</span><span class="m">6</span> guestbook
或者使用
kubectl edit  deployment guestbook  <span class="c1">#找到replicas 设置为6，在保存</span>
</code></pre></div>
<ul>
<li>题目9</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="err">创建</span> <span class="n">pod</span> <span class="err">名称</span> <span class="n">nginx</span><span class="o">-</span><span class="n">kusc0041</span><span class="err">，镜像</span> <span class="n">nginx</span>
<span class="err">调度该</span> <span class="n">pod</span> <span class="err">到</span> <span class="n">disk</span><span class="o">=</span><span class="n">ssd</span> <span class="err">的节点上</span>
<span class="ss">https</span><span class="p">:</span><span class="sr">//</span><span class="n">kubernetes</span><span class="o">.</span><span class="n">io</span><span class="o">/</span><span class="n">docs</span><span class="o">/</span><span class="n">concepts</span><span class="o">/</span><span class="n">scheduling</span><span class="o">-</span><span class="n">eviction</span><span class="o">/</span><span class="n">assign</span><span class="o">-</span><span class="n">pod</span><span class="o">-</span><span class="n">node</span><span class="o">/</span>

<span class="ss">apiVersion</span><span class="p">:</span> <span class="n">v1</span>
<span class="ss">kind</span><span class="p">:</span> <span class="no">Pod</span>
<span class="ss">metadata</span><span class="p">:</span>
  <span class="nb">name</span><span class="p">:</span> <span class="n">nginx</span><span class="o">-</span><span class="n">kusc0041</span>
<span class="ss">spec</span><span class="p">:</span>
  <span class="ss">containers</span><span class="p">:</span>
  <span class="o">-</span> <span class="nb">name</span><span class="p">:</span> <span class="n">nginx</span>
    <span class="ss">image</span><span class="p">:</span> <span class="n">nginx</span>
  <span class="ss">nodeSelector</span><span class="p">:</span>
    <span class="ss">disk</span><span class="p">:</span> <span class="n">ssd</span>
</code></pre></div>
<ul>
<li>题目10</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="err">检查有多少节点已准备就绪（不包括</span><span class="n">nodes</span> <span class="n">tainted</span> <span class="no">Noschedule</span><span class="err">），并将编号写入</span><span class="o">/</span><span class="n">opt</span><span class="o">/</span><span class="n">kusco0402</span><span class="o">/</span><span class="n">kusco0402</span><span class="o">.</span><span class="n">txt</span>
<span class="o">[</span><span class="n">root</span><span class="vi">@k8s</span><span class="o">-</span><span class="n">node1</span> <span class="o">~]</span><span class="c1"># kubectl get nodes|grep -v NAME|wc -l</span>
<span class="mi">2</span>
<span class="o">[</span><span class="n">root</span><span class="vi">@k8s</span><span class="o">-</span><span class="n">node1</span> <span class="o">~]</span><span class="c1"># kubectl describe nodes |grep NoSchedule|wc -l</span>
<span class="mi">0</span>
<span class="n">pods数减去NoSchedule查询的数</span><span class="err">，写入到指定文件中</span>
<span class="n">echo</span> <span class="mi">2</span> <span class="o">&gt;</span> <span class="sr">/opt/</span><span class="n">kusco0402</span><span class="o">/</span><span class="n">kusco0402</span><span class="o">.</span><span class="n">txt</span>
</code></pre></div>
<ul>
<li>题目11</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="err">创建名称为</span> <span class="n">kucc1</span> <span class="err">的</span> <span class="n">pod</span>
<span class="n">pod</span> <span class="err">中运行</span> <span class="n">nginx</span> <span class="err">和</span> <span class="n">redis</span> <span class="err">两个示例</span>

<span class="o">[</span><span class="n">root</span><span class="vi">@k8s</span><span class="o">-</span><span class="n">node1</span> <span class="o">~]</span><span class="c1"># more create-pods.yaml </span>
<span class="ss">apiVersion</span><span class="p">:</span> <span class="n">v1</span>
<span class="ss">kind</span><span class="p">:</span> <span class="no">Pod</span>
<span class="ss">metadata</span><span class="p">:</span>
  <span class="nb">name</span><span class="p">:</span> <span class="n">nginx</span><span class="o">-</span><span class="n">to</span><span class="o">-</span><span class="n">redis</span>
<span class="ss">spec</span><span class="p">:</span>
  <span class="ss">containers</span><span class="p">:</span>
  <span class="o">-</span> <span class="nb">name</span><span class="p">:</span> <span class="n">redis</span>
    <span class="ss">image</span><span class="p">:</span> <span class="n">redis</span>
  <span class="o">-</span> <span class="nb">name</span><span class="p">:</span> <span class="n">nginx</span>
    <span class="ss">image</span><span class="p">:</span> <span class="n">nginx</span>
</code></pre></div>
<ul>
<li>题目12</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="err">创建一个名为</span> <span class="n">app</span><span class="o">-</span><span class="n">config</span> <span class="err">的</span><span class="no">PV</span><span class="err">，</span><span class="no">PV的容量为2Gi</span><span class="err">，访问模式为</span> <span class="no">ReadWriteMany</span><span class="err">，</span><span class="n">volume</span> <span class="err">的类型为</span> <span class="n">hostPath</span>

<span class="n">pv</span> <span class="err">映射的</span> <span class="n">hostPath</span> <span class="err">为</span> <span class="sr">/srv/</span><span class="n">app</span><span class="o">-</span><span class="n">config</span> <span class="err">目录</span>

<span class="err">直接从官方拷贝合适的案例，修改参数，然后设置</span> <span class="n">hostPath</span> <span class="err">为</span> <span class="sr">/srv/</span><span class="n">app</span><span class="o">-</span><span class="n">config</span> <span class="err">即可</span>
<span class="ss">https</span><span class="p">:</span><span class="sr">//</span><span class="n">kubernetes</span><span class="o">.</span><span class="n">io</span><span class="o">/</span><span class="n">zh</span><span class="o">/</span><span class="n">docs</span><span class="o">/</span><span class="n">tasks</span><span class="o">/</span><span class="n">configure</span><span class="o">-</span><span class="n">pod</span><span class="o">-</span><span class="n">container</span><span class="o">/</span><span class="n">configure</span><span class="o">-</span><span class="n">persistent</span><span class="o">-</span><span class="n">volume</span><span class="o">-</span><span class="n">storage</span><span class="o">/</span><span class="c1">#create-a-persistentvolume</span>
<span class="o">[</span><span class="n">root</span><span class="vi">@k8s</span><span class="o">-</span><span class="n">node1</span> <span class="o">~]</span><span class="c1"># more create-pv.yaml </span>
<span class="ss">apiVersion</span><span class="p">:</span> <span class="n">v1</span>
<span class="ss">kind</span><span class="p">:</span> <span class="no">PersistentVolume</span>
<span class="ss">metadata</span><span class="p">:</span>
  <span class="nb">name</span><span class="p">:</span> <span class="n">app</span><span class="o">-</span><span class="n">config</span><span class="o">-</span><span class="mi">1</span>
  <span class="ss">labels</span><span class="p">:</span>
    <span class="ss">type</span><span class="p">:</span> <span class="n">local</span>
<span class="ss">spec</span><span class="p">:</span>
  <span class="ss">capacity</span><span class="p">:</span>
    <span class="ss">storage</span><span class="p">:</span> <span class="mi">2</span><span class="no">Gi</span>
  <span class="ss">accessModes</span><span class="p">:</span>
    <span class="o">-</span> <span class="no">ReadWriteOnce</span>
  <span class="ss">hostPath</span><span class="p">:</span>
    <span class="ss">path</span><span class="p">:</span> <span class="s2">"/srv/app-config"</span>
</code></pre></div>
<ul>
<li>题目13</li>
</ul>
<div class="highlight"><pre><span></span><code>使用指定 storageclass csi-hostpath-sc 创建一个名称为 pv-volume 的 pvc，容量为 10Mi
创建名称为 web-server 的pod，将 nginx 容器的 /usr/share/nginx/html 目录使用该 pvc 挂载
将上述 pvc 的大小从 10Mi 更新为 70Mi，并记录本次变更
https://kubernetes.io/docs/concepts/storage/persistent-volumes/
https://kubernetes.io/docs/concepts/workloads/controllers/daemonset/
<span class="o">[</span>root@k8s-node1 ~<span class="o">]</span><span class="c1"># cat  create-pvc.yaml   </span>
apiVersion: v1
kind: PersistentVolumeClaim
metadata:
  name: pv-volume
spec:
  storageClassName: csi-hostpath-sc 
  accessModes:
    - ReadWriteOnce
  resources:
    requests:
      storage: 3Mi
<span class="o">[</span>root@k8s-node1 ~<span class="o">]</span><span class="c1"># cat  pvc-mount-pods.yaml</span>
apiVersion: v1
kind: Pod
metadata:
  name: task-pv-pod
spec:
  volumes:
    - name: my-pvc
      persistentVolumeClaim:
        claimName: pv-volume
  containers:
    - name: web-server
      image: nginx
      ports:
        - containerPort: <span class="m">80</span>
          name: <span class="s2">"http-server"</span>
      volumeMounts:
        - mountPath: <span class="s2">"/usr/share/nginx/html"</span>
          name: my-pvc
kubectl edit pvc pv-volume --record   <span class="c1">#--record是记录在注解中</span>
</code></pre></div>
<ul>
<li>题目15</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="n">添加</span><span class="w"> </span><span class="n">sidecar</span><span class="w"> </span><span class="n">容器并输出日志</span><span class="w"></span>
<span class="n">添加一个</span><span class="w"> </span><span class="n">sidecar</span><span class="w"> </span><span class="n">容器</span><span class="p">(</span><span class="n">使用busybox</span><span class="w"> </span><span class="n">镜像</span><span class="p">)</span><span class="n">到已有的</span><span class="w"> </span><span class="n">pod</span><span class="w"> </span><span class="mi">11</span><span class="o">-</span><span class="n">factor</span><span class="o">-</span><span class="n">app</span><span class="w"> </span><span class="n">中</span><span class="w"></span>
<span class="n">确保</span><span class="w"> </span><span class="n">sidecar</span><span class="w"> </span><span class="n">容器能够输出</span><span class="w"> </span><span class="o">/</span><span class="n">var</span><span class="o">/</span><span class="n">log</span><span class="o">/</span><span class="mi">11</span><span class="o">-</span><span class="n">factor</span><span class="o">-</span><span class="n">app</span><span class="p">.</span><span class="n">log</span><span class="w"> </span><span class="n">的信息</span><span class="w"></span>
<span class="n">使用</span><span class="w"> </span><span class="n">volume</span><span class="w"> </span><span class="n">挂载</span><span class="w"> </span><span class="o">/</span><span class="n">var</span><span class="o">/</span><span class="n">log</span><span class="w"> </span><span class="n">目录</span><span class="err">，</span><span class="n">确保</span><span class="w"> </span><span class="n">sidecar</span><span class="w"> </span><span class="n">能访问</span><span class="w"> </span><span class="mi">11</span><span class="o">-</span><span class="n">factor</span><span class="o">-</span><span class="n">app</span><span class="p">.</span><span class="n">log</span><span class="w"> </span><span class="n">文件</span><span class="w"></span>

<span class="n">通过</span><span class="w"> </span><span class="n">kubectl</span><span class="w"> </span><span class="n">get</span><span class="w"> </span><span class="n">pod</span><span class="w"> </span><span class="o">-</span><span class="n">o</span><span class="w"> </span><span class="n">yaml</span><span class="w"> </span><span class="n">的方法备份原始</span><span class="w"> </span><span class="n">pod</span><span class="w"> </span><span class="n">信息</span><span class="err">，</span><span class="n">删除旧的pod</span><span class="w"> </span><span class="mi">11</span><span class="o">-</span><span class="n">factor</span><span class="o">-</span><span class="n">app</span><span class="w"></span>
<span class="n">copy</span><span class="w"> </span><span class="n">一份新</span><span class="w"> </span><span class="n">yaml</span><span class="w"> </span><span class="n">文件</span><span class="err">，</span><span class="n">添加</span><span class="w"> </span><span class="n">一个名称为</span><span class="w"> </span><span class="n">sidecar</span><span class="w"> </span><span class="n">的容器</span><span class="w"></span>
<span class="n">新建</span><span class="w"> </span><span class="n">emptyDir</span><span class="w"> </span><span class="n">的卷</span><span class="err">，</span><span class="n">确保两个容器都挂载了</span><span class="w"> </span><span class="o">/</span><span class="n">var</span><span class="o">/</span><span class="n">log</span><span class="w"> </span><span class="n">目录</span><span class="w"></span>
<span class="n">新建含有</span><span class="w"> </span><span class="n">sidecar</span><span class="w"> </span><span class="n">的</span><span class="w"> </span><span class="n">pod</span><span class="err">，</span><span class="n">并通过</span><span class="w"> </span><span class="n">kubectl</span><span class="w"> </span><span class="n">logs</span><span class="w"> </span><span class="n">验证</span><span class="w"></span>
<span class="nl">https</span><span class="p">:</span><span class="c1">//kubernetes.io/zh/docs/concepts/cluster-administration/logging/</span>
</code></pre></div>
<ul>
<li>题目16</li>
</ul>
<div class="highlight"><pre><span></span><code>节点 wk8s-node-0 状态为 NotReady，查看原因并恢复其状态为 Ready

确保操作为持久的
解析： 通过 get nodes 查看异常节点，登录节点查看 kubelet 等组件的 status 并判断原因
启动 kubelet 并 <span class="nb">enable</span> kubelet 即可

kubectl get nodes
ssh wk8s-node-0
sudo -i 
systemctl status kubelet
systemctl <span class="nb">enable</span> kubelet
systemctl restart kubelet
systemctl status kubelet

再次 get nodes， 确保节点恢复 Ready 状态
</code></pre></div>
<ul>
<li>题目17</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="err">查找</span> <span class="n">label</span> <span class="err">为</span> <span class="n">name</span><span class="p">=</span><span class="n">cpu</span><span class="o">-</span><span class="n">loader</span> <span class="err">的</span> <span class="n">pod</span><span class="p">,</span><span class="err">筛选出</span> <span class="n">cpu</span> <span class="err">负载最高的那个</span> <span class="n">pod</span><span class="err">，并将名称</span> <span class="err">追加</span> <span class="err">到</span> <span class="o">/</span><span class="n">opt</span><span class="o">/</span><span class="n">KUTR00401</span><span class="o">/</span><span class="n">KUTR00401</span><span class="p">.</span><span class="n">txt</span>

<span class="err">解析：</span> <span class="err">使用</span><span class="n">top命令</span><span class="err">，结合</span> <span class="o">-</span><span class="n">l</span> <span class="n">label_key</span><span class="p">=</span><span class="n">label_value</span> <span class="err">和</span> <span class="o">--</span><span class="bp">sort</span><span class="p">=</span><span class="n">cpu</span> <span class="err">过滤出目标即可</span>
<span class="n">kubectl</span> <span class="n">top</span> <span class="n">pod</span> <span class="o">-</span><span class="n">l</span> <span class="n">name</span><span class="p">=</span><span class="n">cpu</span><span class="o">-</span><span class="n">loader</span> <span class="o">-</span><span class="n">A</span> <span class="o">--</span><span class="bp">sort</span><span class="o">-</span><span class="n">by</span><span class="p">=</span><span class="n">cpu</span>
<span class="n">echo</span> <span class="n">podName</span> <span class="o">&gt;&gt;</span> <span class="o">/</span><span class="n">opt</span><span class="o">/</span><span class="n">KUTR00401</span><span class="o">/</span><span class="n">KUTR00401</span><span class="p">.</span><span class="n">txt</span>
</code></pre></div>
<h2 id="_3">需要重点注意的题<a class="headerlink" href="#_3" title="Permanent link">¶</a></h2>
<ul>
<li>添加 sidecar 容器并输出日志</li>
</ul>
<div class="highlight"><pre><span></span><code>添加一个 sidecar 容器<span class="o">(</span>使用busybox 镜像<span class="o">)</span>到已有的 pod <span class="m">11</span>-factor-app 中
确保 sidecar 容器能够输出 /var/log/11-factor-app.log 的信息
使用 volume 挂载 /var/log 目录，确保 sidecar 能访问 <span class="m">11</span>-factor-app.log 文件

解答：  https://kubernetes.io/zh/docs/concepts/cluster-administration/logging/
先用kubectl get podname -o yaml &gt; podname.yaml 获取到yaml文件，然后删除旧的 pod；
再重新 copy 一个新的 yaml 添加 sidecar 容器，并在两个容器中都挂载 emtpyDir 到 /var/log目录，最后通过apply 生成带 sidecar 的 pod；
pod 正常拉起后,通过 kubectl logs <span class="m">11</span>-factor-app sidecar 确认能正常输入日志即可

<span class="c1">#先备份</span>
<span class="o">[</span>root@k8s-node1 ~<span class="o">]</span><span class="c1"># kubectl  get pods  11-factor-app -o yaml &gt;    11-factor-app.ayml  </span>
<span class="c1">#然后在删除，使用官方的模板进行修改即可。</span>

<span class="o">[</span>root@k8s-node1 ~<span class="o">]</span><span class="c1"># more sidecar.yaml </span>
apiVersion: v1
kind: Pod
metadata:
  name: <span class="m">11</span>-factor-app
spec:
  containers:
  - name: <span class="m">11</span>-factor-app
    image: busybox
    args:
    - /bin/sh
    - -c
    - &gt;
      <span class="nv">i</span><span class="o">=</span><span class="m">0</span><span class="p">;</span>
      <span class="k">while</span> true<span class="p">;</span>
      <span class="k">do</span>
        <span class="nb">echo</span> <span class="s2">"</span><span class="k">$(</span>date<span class="k">)</span><span class="s2"> INFO </span><span class="nv">$i</span><span class="s2">"</span> &gt;&gt; /var/log/11-factor-app.log<span class="p">;</span>
        <span class="nv">i</span><span class="o">=</span><span class="k">$((</span>i+1<span class="k">))</span><span class="p">;</span>
        sleep <span class="m">1</span><span class="p">;</span>
      <span class="k">done</span>      
    volumeMounts:
    - name: varlog
      mountPath: /var/log
  - name: sidecar
    image: busybox
    args: <span class="o">[</span>/bin/sh, -c, <span class="s1">'tail -n+1 -f /var/log/11-factor-app.log'</span><span class="o">]</span>
    volumeMounts:
    - name: varlog
      mountPath: /var/log
  volumes:
  - name: varlog
    emptyDir: <span class="o">{}</span>
</code></pre></div>
<ul>
<li>创建和使用 PVC</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="err">使用指定</span> <span class="n">storageclass</span> <span class="n">csi</span><span class="o">-</span><span class="n">hostpath</span><span class="o">-</span><span class="n">sc</span> <span class="err">创建一个名称为</span> <span class="n">pv</span><span class="o">-</span><span class="n">volume</span> <span class="err">的</span> <span class="n">pvc</span><span class="err">，容量为</span> <span class="mi">10</span><span class="no">Mi</span>
<span class="err">创建名称为</span> <span class="n">web</span><span class="o">-</span><span class="n">server</span> <span class="err">的</span><span class="n">pod</span><span class="err">，将</span> <span class="n">nginx</span> <span class="err">容器的</span> <span class="sr">/usr/s</span><span class="n">hare</span><span class="o">/</span><span class="n">nginx</span><span class="o">/</span><span class="n">html</span> <span class="err">目录使用该</span> <span class="n">pvc</span> <span class="err">挂载</span>
<span class="err">将上述</span> <span class="n">pvc</span> <span class="err">的大小从</span> <span class="mi">10</span><span class="no">Mi</span> <span class="err">更新为</span> <span class="mi">70</span><span class="no">Mi</span><span class="err">，并记录本次变更</span>

<span class="err">首先要确认是否进错了</span><span class="n">k8s集群中</span><span class="err">，然后在查看</span><span class="no">StorageClass</span> <span class="err">是否有对应的</span>
<span class="o">[</span><span class="n">root</span><span class="vi">@k8s</span><span class="o">-</span><span class="n">node1</span> <span class="n">newpvc</span><span class="o">]</span><span class="c1"># more createpvc.yaml </span>
<span class="ss">apiVersion</span><span class="p">:</span> <span class="n">v1</span>
<span class="ss">kind</span><span class="p">:</span> <span class="no">PersistentVolumeClaim</span>
<span class="ss">metadata</span><span class="p">:</span>
  <span class="nb">name</span><span class="p">:</span> <span class="n">pv</span><span class="o">-</span><span class="n">volume</span><span class="o">-</span><span class="n">to2</span>
<span class="ss">spec</span><span class="p">:</span>
  <span class="ss">accessModes</span><span class="p">:</span>
    <span class="o">-</span> <span class="no">ReadWriteOnce</span>
  <span class="ss">volumeMode</span><span class="p">:</span> <span class="no">Filesystem</span>
  <span class="ss">resources</span><span class="p">:</span>
    <span class="ss">requests</span><span class="p">:</span>
      <span class="ss">storage</span><span class="p">:</span> <span class="mi">10</span><span class="no">Mi</span>
  <span class="ss">storageClassName</span><span class="p">:</span> <span class="n">cis</span><span class="o">-</span><span class="n">hostpath</span><span class="o">-</span><span class="n">cs</span><span class="o">-</span><span class="n">to2</span>

<span class="o">[</span><span class="n">root</span><span class="vi">@k8s</span><span class="o">-</span><span class="n">node1</span> <span class="n">newpvc</span><span class="o">]</span><span class="c1"># kubectl  get pvc #如果没绑定的话，看下</span>
<span class="no">NAME</span>            <span class="no">STATUS</span>    <span class="no">VOLUME</span>               <span class="no">CAPACITY</span>   <span class="no">ACCESS</span> <span class="no">MODES</span>   <span class="no">STORAGECLASS</span>          <span class="no">AGE</span>
<span class="n">pv</span><span class="o">-</span><span class="n">volume</span><span class="o">-</span><span class="n">to2</span>   <span class="no">Bound</span>     <span class="n">task</span><span class="o">-</span><span class="n">pv</span><span class="o">-</span><span class="n">volume</span><span class="o">-</span><span class="n">to2</span>   <span class="mi">1</span><span class="no">Gi</span>        <span class="no">RWO</span>            <span class="n">cis</span><span class="o">-</span><span class="n">hostpath</span><span class="o">-</span><span class="n">cs</span><span class="o">-</span><span class="n">to2</span>   <span class="mi">31</span><span class="n">m</span>

<span class="o">[</span><span class="n">root</span><span class="vi">@k8s</span><span class="o">-</span><span class="n">node1</span> <span class="n">newpvc</span><span class="o">]</span><span class="c1"># more newpvcmount.yaml </span>
<span class="ss">apiVersion</span><span class="p">:</span> <span class="n">v1</span>
<span class="ss">kind</span><span class="p">:</span> <span class="no">Pod</span>
<span class="ss">metadata</span><span class="p">:</span>
  <span class="nb">name</span><span class="p">:</span> <span class="n">web</span><span class="o">-</span><span class="n">server</span><span class="o">-</span><span class="n">to2</span>
<span class="ss">spec</span><span class="p">:</span>
  <span class="ss">containers</span><span class="p">:</span>
    <span class="o">-</span> <span class="nb">name</span><span class="p">:</span> <span class="n">nginx</span>
      <span class="ss">image</span><span class="p">:</span> <span class="n">nginx</span>
      <span class="ss">volumeMounts</span><span class="p">:</span>
      <span class="o">-</span> <span class="ss">mountPath</span><span class="p">:</span> <span class="s2">"/usr/share/nginx/html"</span>
        <span class="nb">name</span><span class="p">:</span> <span class="n">mypd</span>
  <span class="ss">volumes</span><span class="p">:</span>
    <span class="o">-</span> <span class="nb">name</span><span class="p">:</span> <span class="n">mypd</span>
      <span class="ss">persistentVolumeClaim</span><span class="p">:</span>
        <span class="ss">claimName</span><span class="p">:</span> <span class="n">pv</span><span class="o">-</span><span class="n">volume</span><span class="o">-</span><span class="n">to2</span>

 <span class="n">kubectl</span>  <span class="n">edit</span>   <span class="n">pvc</span> <span class="n">pv</span><span class="o">-</span><span class="n">volume</span><span class="o">-</span><span class="n">to2</span>   <span class="o">--</span><span class="n">record</span>  <span class="c1">#由于nfs和本地卷不支持动态调整，故就没做。</span>
</code></pre></div>
<ul>
<li>按要求创建 Ingress 资源</li>
</ul>
<div class="highlight"><pre><span></span><code>创建一个新的 Ingress 资源，名称 ping，命名空间 ing-internal
使用 /hello 路径暴露服务 hello 的 <span class="m">5678</span> 端口， <span class="c1">#解答创建ingress之后无法获取ip地址</span>
</code></pre></div>
<h2 id="cka-k8s">CKA考试 K8s 官方页签<a class="headerlink" href="#cka-k8s" title="Permanent link">¶</a></h2>
<ul>
<li>使用说明</li>
<li>使用复制之后写入文件txt文件中，后缀修改成html,然后在导入书签中即可</li>
<li>见 https://www.jianshu.com/p/a743860b13fe</li>
</ul>
<blockquote>
<p>参考文档：</p>
<ul>
<li>https://www.cloudcared.cn/3138.html</li>
</ul>
</blockquote>
<hr/>
<div class="md-source-file">
<small>
    
      最后更新:
      2022-05-08
    
  </small>
</div>
</article>
</div>
</div>
</main>
<footer class="md-footer">
<nav aria-label="页脚" class="md-footer__inner md-grid">
<a aria-label="上一页: CKA 备考大纲" class="md-footer__link md-footer__link--prev" href="../02-CKA%E5%A4%A7%E7%BA%B2/" rel="prev">
<div class="md-footer__button md-icon">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"></path></svg>
</div>
<div class="md-footer__title">
<div class="md-ellipsis">
<span class="md-footer__direction">
                上一页
              </span>
              CKA 备考大纲
            </div>
</div>
</a>
</nav>
<div class="md-footer-meta md-typeset">
<div class="md-footer-meta__inner md-grid">
<div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" rel="noopener" target="_blank">
      Material for MkDocs
    </a>
 ... <a class="link--pdf-download" download href="../../../pdf/document.pdf" title="PDF">download PDF</a></div>
<div class="md-social">
<a class="md-social__link" href="https://github.com/squidfunk/mkdocs-material" rel="noopener" target="_blank" title="Mkdocs Material">
<svg viewbox="0 0 496 512" xmlns="http://www.w3.org/2000/svg"><!--! Font Awesome Free 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"></path></svg>
</a>
</div>
</div>
</div>
</footer>
</div>
<div class="md-dialog" data-md-component="dialog">
<div class="md-dialog__inner md-typeset"></div>
</div>
<script id="__config" type="application/json">{"base": "../../..", "features": ["navigation.tabs", "navigation.tabs.sticky", "navigation.sections", "navigation.instant", "navigation.tracking", "navigation.indexes", "toc.follow", {"tabs": true}, "search.suggest", "search.highlight", "search.share", "content.code.annotate"], "search": "../../../assets/javascripts/workers/search.2a1c317c.min.js", "translations": {"clipboard.copied": "\u5df2\u590d\u5236", "clipboard.copy": "\u590d\u5236", "search.config.lang": "ja", "search.config.pipeline": "trimmer, stemmer", "search.config.separator": "[\\uff0c\\u3002]+", "search.placeholder": "\u641c\u7d22", "search.result.more.one": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.more.other": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 # \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.none": "\u6ca1\u6709\u627e\u5230\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.one": "\u627e\u5230 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.other": "# \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.placeholder": "\u952e\u5165\u4ee5\u5f00\u59cb\u641c\u7d22", "search.result.term.missing": "\u7f3a\u5c11", "select.version.title": "\u9009\u62e9\u5f53\u524d\u7248\u672c"}}</script>
<script src="../../../assets/javascripts/bundle.ed9748b7.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script>
</body>
</html>